{"meta":{"version":1,"warehouse":"4.0.2"},"models":{"Asset":[{"_id":"source/img/inkscape/file-export.png","path":"img/inkscape/file-export.png","modified":0,"renderable":0},{"_id":"source/img/inkscape/file-property.png","path":"img/inkscape/file-property.png","modified":0,"renderable":0},{"_id":"source/img/inkscape/file-unit.png","path":"img/inkscape/file-unit.png","modified":0,"renderable":0},{"_id":"source/img/inkscape/xml-editor.png","path":"img/inkscape/xml-editor.png","modified":0,"renderable":0},{"_id":"source/img/svg/svg-1.gif","path":"img/svg/svg-1.gif","modified":0,"renderable":0},{"_id":"source/img/svg/svg-path-wather.gif","path":"img/svg/svg-path-wather.gif","modified":0,"renderable":0},{"_id":"node_modules/hexo-theme-fluid/source/css/gitalk.css","path":"css/gitalk.css","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-fluid/source/css/highlight-dark.styl","path":"css/highlight-dark.styl","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-fluid/source/css/highlight.styl","path":"css/highlight.styl","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-fluid/source/css/main.styl","path":"css/main.styl","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-fluid/source/js/boot.js","path":"js/boot.js","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-fluid/source/js/color-schema.js","path":"js/color-schema.js","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-fluid/source/js/events.js","path":"js/events.js","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-fluid/source/js/img-lazyload.js","path":"js/img-lazyload.js","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-fluid/source/js/leancloud.js","path":"js/leancloud.js","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-fluid/source/js/local-search.js","path":"js/local-search.js","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-fluid/source/js/plugins.js","path":"js/plugins.js","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-fluid/source/js/utils.js","path":"js/utils.js","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-fluid/source/img/avatar.png","path":"img/avatar.png","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-fluid/source/img/default.png","path":"img/default.png","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-fluid/source/img/fluid.png","path":"img/fluid.png","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-fluid/source/img/loading.gif","path":"img/loading.gif","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-fluid/source/img/police_beian.png","path":"img/police_beian.png","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-fluid/source/xml/local-search.xml","path":"xml/local-search.xml","modified":0,"renderable":1}],"Cache":[{"_id":"source/_posts/inkscape.md","hash":"8304c8c9ad4dff66651764a98c2545ef28f6c6a7","modified":1694394362313},{"_id":"source/_posts/micro-app.md","hash":"eb36af90f398b3f80caa2caa191efa34edaa21c7","modified":1694684456028},{"_id":"source/_posts/svg-animate.md","hash":"b8aaa90308a4255498953330a24975a911334c7a","modified":1694403487240},{"_id":"source/about/index.md","hash":"d61de2ae3fb212adafda7ce84bdceefaa1e327dd","modified":1694157058340},{"_id":"source/img/svg/svg-1.gif","hash":"48fbf8755032832381ca43353ecc7ce4134a00f4","modified":1694402815547},{"_id":"source/img/svg/svg-path-wather.gif","hash":"90d1445f05f8d560eef1281136a6df0c931e4f9c","modified":1694403412315},{"_id":"source/img/inkscape/file-property.png","hash":"69d93c3e66073d7d4429dce8a1a7173e6449423e","modified":1694394362332},{"_id":"source/img/inkscape/file-unit.png","hash":"11ad9ed3e405cedcf58b7eb8c8476c0db6eb748a","modified":1694394362340},{"_id":"node_modules/hexo-theme-fluid/source/css/_pages/_tag/tag.styl","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1694157197515},{"_id":"source/img/inkscape/file-export.png","hash":"0081562712294df35116aa58cc902020819eed13","modified":1694394362326},{"_id":"node_modules/hexo-theme-fluid/LICENSE","hash":"26f9356fd6e84b5a88df6d9014378f41b65ba209","modified":1694157196852},{"_id":"node_modules/hexo-theme-fluid/README.md","hash":"49f681a203eecfa7127ac22edc13bd3b49693d0a","modified":1694157197239},{"_id":"node_modules/hexo-theme-fluid/_config.yml","hash":"cdde6c6d6a1bdf9fb965313e21d92cf6213582b6","modified":1694157197522},{"_id":"node_modules/hexo-theme-fluid/package.json","hash":"b2c283d4e9aaf9ba49b8abb81adc03117b0e07db","modified":1694157197236},{"_id":"node_modules/hexo-theme-fluid/languages/de.yml","hash":"0e7d455d9e004ff15d8924b7a0c35cea25ee5b1d","modified":1694157197526},{"_id":"node_modules/hexo-theme-fluid/languages/ja.yml","hash":"3dd6d20f8d26585a7c154a8e59fe8d5d902f4c6a","modified":1694157197534},{"_id":"node_modules/hexo-theme-fluid/languages/eo.yml","hash":"a556251cc50a5680578c03f1efbf252b1f4ab860","modified":1694157197531},{"_id":"node_modules/hexo-theme-fluid/languages/es.yml","hash":"7112594259c88c04714be152af7fd377687dad40","modified":1694157197533},{"_id":"node_modules/hexo-theme-fluid/languages/en.yml","hash":"cb11b39f44ea069652c9647179606b6cecc98d50","modified":1694157197528},{"_id":"node_modules/hexo-theme-fluid/languages/ru.yml","hash":"7dc78f22696649a4c68dc65a9b52d9a992fa82a0","modified":1694157197535},{"_id":"node_modules/hexo-theme-fluid/languages/zh-CN.yml","hash":"f96a22f989897ecddc69d5867a206e1cf6b8f610","modified":1694157197536},{"_id":"node_modules/hexo-theme-fluid/languages/zh-HK.yml","hash":"80ed400a7adaa92ea54fc7f5d534c9af795bed00","modified":1694157197544},{"_id":"node_modules/hexo-theme-fluid/languages/zh-TW.yml","hash":"596d031dff3826ae8e4ffc8931fff28977b73247","modified":1694157197551},{"_id":"node_modules/hexo-theme-fluid/layout/.DS_Store","hash":"e2295dbe42d85b294e6f3aeefaf3623bd31759ed","modified":1694157196807},{"_id":"node_modules/hexo-theme-fluid/layout/404.ejs","hash":"b84d575c7b7f778b4cb64e89ad3d0aed4a896820","modified":1694157196862},{"_id":"node_modules/hexo-theme-fluid/layout/about.ejs","hash":"163bee643e6a38912d3ae70923c83c48d57222e7","modified":1694157196864},{"_id":"node_modules/hexo-theme-fluid/layout/archive.ejs","hash":"7c1f44005849791feae4abaa10fae4cb983d3277","modified":1694157196877},{"_id":"node_modules/hexo-theme-fluid/layout/categories.ejs","hash":"13859726c27b6c79b5876ec174176d0f9c1ee164","modified":1694157196889},{"_id":"node_modules/hexo-theme-fluid/layout/category.ejs","hash":"f099161b738a16a32253f42085b5444f902018ed","modified":1694157196909},{"_id":"node_modules/hexo-theme-fluid/layout/index.ejs","hash":"9b4c154462ce78de4c9ea7dd15dce4ca8e8c1cf8","modified":1694157196984},{"_id":"node_modules/hexo-theme-fluid/layout/layout.ejs","hash":"7e0023474128fbe4d68c467704c41f1712432415","modified":1694157196986},{"_id":"node_modules/hexo-theme-fluid/layout/page.ejs","hash":"ed5007a3feb8f14d3d2843271bfb298eb0c56219","modified":1694157197019},{"_id":"node_modules/hexo-theme-fluid/layout/links.ejs","hash":"1cac32ec4579aaf7b9fa39d317497331d4c5e1dd","modified":1694157196987},{"_id":"node_modules/hexo-theme-fluid/layout/post.ejs","hash":"75ab6958d929e92566ca580d0b8bd0eeae10649a","modified":1694157197032},{"_id":"node_modules/hexo-theme-fluid/layout/tag.ejs","hash":"9d686364c4d16a1a9219471623af452035c5b966","modified":1694157197054},{"_id":"node_modules/hexo-theme-fluid/layout/tags.ejs","hash":"1d06af34b6cf1d8a20d2eb565e309326ceba309f","modified":1694157197062},{"_id":"node_modules/hexo-theme-fluid/scripts/.DS_Store","hash":"daec53fd4601c37ca272321ba2eb594d9b0a43ac","modified":1694157196813},{"_id":"node_modules/hexo-theme-fluid/source/.DS_Store","hash":"e11e97632e6d13d5b9dccadcc514268f3c039508","modified":1694157196832},{"_id":"node_modules/hexo-theme-fluid/layout/_partials/archive-list.ejs","hash":"7520fbf91f762207c2ab06b2c293235cd5b23905","modified":1694157196874},{"_id":"node_modules/hexo-theme-fluid/layout/_partials/category-chains.ejs","hash":"18309584aab83bc4deb20723ebad832149dd2e24","modified":1694157196895},{"_id":"node_modules/hexo-theme-fluid/layout/_partials/category-list.ejs","hash":"f8d2f1907450e61968e6d54443e9be8138196a77","modified":1694157196899},{"_id":"node_modules/hexo-theme-fluid/layout/_partials/comments.ejs","hash":"d707c47b2638c94e489bc43d4cfd098b7c58447f","modified":1694157196922},{"_id":"node_modules/hexo-theme-fluid/layout/_partials/css.ejs","hash":"85f6e051550907681ab4ed2e268ac8f6e9ebf931","modified":1694157196931},{"_id":"node_modules/hexo-theme-fluid/layout/_partials/footer.ejs","hash":"10ccfb8eef4e16182183c9a3e175c90d5b6397d3","modified":1694157196959},{"_id":"node_modules/hexo-theme-fluid/layout/_partials/head.ejs","hash":"7b7b1d098726e86687a15fe3d520d178577ffcae","modified":1694157196973},{"_id":"node_modules/hexo-theme-fluid/layout/_partials/header.ejs","hash":"0d5e397d30051e5fbabe7b47cfd1f1e6a5820af1","modified":1694157196978},{"_id":"node_modules/hexo-theme-fluid/layout/_partials/markdown-plugins.ejs","hash":"fc4bdf7de0cf1a66d0e5e4fba1b31d6f7ed49468","modified":1694157196994},{"_id":"node_modules/hexo-theme-fluid/layout/_partials/paginator.ejs","hash":"0f38a2c238169edcb63fc46c23bfc529ff3859b7","modified":1694157197025},{"_id":"node_modules/hexo-theme-fluid/layout/_partials/scripts.ejs","hash":"da5810785105e5075861593c7ac22c7aa9665a72","modified":1694157197037},{"_id":"node_modules/hexo-theme-fluid/layout/_partials/search.ejs","hash":"70e1c929e084ca8a2648cedabf29b372511ea2b8","modified":1694157197041},{"_id":"node_modules/hexo-theme-fluid/scripts/events/.DS_Store","hash":"80308812974d7cb7e001cd8f64ff9fced30ff139","modified":1694157196818},{"_id":"node_modules/hexo-theme-fluid/scripts/events/index.js","hash":"79de5a379b28cad759a49048351c7f6b8915bd7d","modified":1694157197167},{"_id":"node_modules/hexo-theme-fluid/scripts/filters/default-injects.js","hash":"b2013ae8e189cd07ebc8a2ff48a78e153345210f","modified":1694157197147},{"_id":"node_modules/hexo-theme-fluid/scripts/filters/post-filter.js","hash":"0047666f996c54017e06668b5242ed8a311ebce0","modified":1694157197217},{"_id":"node_modules/hexo-theme-fluid/scripts/filters/locals.js","hash":"58d0fec976f6b1d35e7ea03edc45414088acf05c","modified":1694157197195},{"_id":"node_modules/hexo-theme-fluid/scripts/generators/index-generator.js","hash":"9159fc22fa84a7b605dd15fe4104f01fe9c71147","modified":1694157197165},{"_id":"node_modules/hexo-theme-fluid/scripts/generators/local-search.js","hash":"9ac5ddad06e9b0e6015ce531430018182a4bc0fa","modified":1694157197188},{"_id":"node_modules/hexo-theme-fluid/scripts/generators/pages.js","hash":"d3e75f53c59674d171309e50702954671f31f1a4","modified":1694157197213},{"_id":"node_modules/hexo-theme-fluid/scripts/helpers/date.js","hash":"9bda6382f61b40a20c24af466fe10c8366ebb74c","modified":1694157197146},{"_id":"node_modules/hexo-theme-fluid/scripts/helpers/engine.js","hash":"d3a231d106795ce99cb0bc77eb65f9ae44515933","modified":1694157197148},{"_id":"node_modules/hexo-theme-fluid/scripts/helpers/export-config.js","hash":"8e67b522c47aa250860e3fe2c733f1f958a506c0","modified":1694157197152},{"_id":"node_modules/hexo-theme-fluid/scripts/helpers/import.js","hash":"ca53e8dbf7d44cfd372cfa79ac60f35a7d5b0076","modified":1694157197164},{"_id":"node_modules/hexo-theme-fluid/scripts/helpers/injects.js","hash":"1ad2ae6b11bd8806ee7dd6eb7140d8b54a95d613","modified":1694157197170},{"_id":"node_modules/hexo-theme-fluid/scripts/helpers/page.js","hash":"4607607445233b3029ef20ed5e91de0da0a7f9c5","modified":1694157197213},{"_id":"node_modules/hexo-theme-fluid/scripts/helpers/scope.js","hash":"d41d9d658fcb54964b388598e996747aadb85b0f","modified":1694157197220},{"_id":"node_modules/hexo-theme-fluid/scripts/helpers/url.js","hash":"2a6a8288176d0e0f6ec008056bf2745a86e8943e","modified":1694157197222},{"_id":"node_modules/hexo-theme-fluid/scripts/helpers/utils.js","hash":"226f99b465ff513de075a8e78b321d6cb62592ca","modified":1694157197223},{"_id":"node_modules/hexo-theme-fluid/scripts/helpers/wordcount.js","hash":"4543b8954c5c2ca91191cc0d53cf071b3f26faaa","modified":1694157197226},{"_id":"node_modules/hexo-theme-fluid/scripts/tags/checkbox.js","hash":"4938610c3543a921a341bc074626d511cb1a4b45","modified":1694157197138},{"_id":"node_modules/hexo-theme-fluid/scripts/tags/button.js","hash":"3eb43a8cdea0a64576ad6b31b4df6c2bf5698d4c","modified":1694157197136},{"_id":"node_modules/hexo-theme-fluid/scripts/tags/group-image.js","hash":"4aeebb797026f1df25646a5d69f7fde79b1bcd26","modified":1694157197156},{"_id":"node_modules/hexo-theme-fluid/scripts/tags/label.js","hash":"f05a6d32cca79535b22907dc03edb9d3fa2d8176","modified":1694157197171},{"_id":"node_modules/hexo-theme-fluid/scripts/tags/mermaid.js","hash":"75160561e1ef3603b6d2ad2938464ab1cb77fd38","modified":1694157197206},{"_id":"node_modules/hexo-theme-fluid/scripts/tags/note.js","hash":"e3b456a079e5dc0032473b516c865b20f83d2c26","modified":1694157197208},{"_id":"node_modules/hexo-theme-fluid/scripts/utils/.DS_Store","hash":"df2fbeb1400acda0909a32c1cf6bf492f1121e07","modified":1694157196826},{"_id":"node_modules/hexo-theme-fluid/scripts/utils/compare-versions.js","hash":"dbbc928c914fc2bd242cd66aa0c45971aec13a5d","modified":1694157197140},{"_id":"node_modules/hexo-theme-fluid/scripts/utils/object.js","hash":"33b57e4decdc5e75c518859f168c8ba80b2c665b","modified":1694157197209},{"_id":"node_modules/hexo-theme-fluid/scripts/utils/resolve.js","hash":"8c4a8b62aa8608f12f1e9046231dff04859dc3e9","modified":1694157197219},{"_id":"node_modules/hexo-theme-fluid/scripts/utils/url-join.js","hash":"718aab5e7b2059a06b093ca738de420d9afa44ba","modified":1694157197221},{"_id":"node_modules/hexo-theme-fluid/source/css/gitalk.css","hash":"a57b3cc8e04a0a4a27aefa07facf5b5e7bca0e76","modified":1694157196859},{"_id":"node_modules/hexo-theme-fluid/source/css/highlight-dark.styl","hash":"45695ef75c31a4aa57324dd408b7e2327a337018","modified":1694157197466},{"_id":"node_modules/hexo-theme-fluid/source/css/highlight.styl","hash":"a9efc52a646a9e585439c768557e3e3c9e3326dc","modified":1694157197470},{"_id":"node_modules/hexo-theme-fluid/source/css/main.styl","hash":"855ae5fe229c51afa57f7645f6997a27a705d7e4","modified":1694157197482},{"_id":"node_modules/hexo-theme-fluid/source/js/boot.js","hash":"38bd26c6b7acdafda86dda3560e6a3ca488d3c76","modified":1694157197133},{"_id":"node_modules/hexo-theme-fluid/source/js/color-schema.js","hash":"76a198f8721352ebeaf5b2ef2f4db00612da4796","modified":1694157197139},{"_id":"node_modules/hexo-theme-fluid/source/js/events.js","hash":"89e3561488a618ed0caeb9edf18e441978e29c25","modified":1694157197149},{"_id":"node_modules/hexo-theme-fluid/source/js/img-lazyload.js","hash":"cbdeca434ec4da51f488c821d51b4d23c73294af","modified":1694157197162},{"_id":"node_modules/hexo-theme-fluid/source/js/leancloud.js","hash":"eff77c7a5c399fcaefda48884980571e15243fc9","modified":1694157197185},{"_id":"node_modules/hexo-theme-fluid/source/js/local-search.js","hash":"b9945f76f8682f3ec32edfb285b26eb559f7b7e8","modified":1694157197192},{"_id":"node_modules/hexo-theme-fluid/source/js/plugins.js","hash":"c34916291e392a774ff3e85c55badb83e8661297","modified":1694157197215},{"_id":"node_modules/hexo-theme-fluid/source/js/utils.js","hash":"b82e7c289a66dfd36064470fd41c0e96fc598b43","modified":1694157197225},{"_id":"node_modules/hexo-theme-fluid/source/img/.DS_Store","hash":"df2fbeb1400acda0909a32c1cf6bf492f1121e07","modified":1694157196842},{"_id":"node_modules/hexo-theme-fluid/source/img/avatar.png","hash":"fe739a158cc128f70f780eb5fa96f388b81d478f","modified":1694157197248},{"_id":"node_modules/hexo-theme-fluid/source/img/fluid.png","hash":"64b215db2cb3af98fe639e94537cb5209f959c78","modified":1694157197377},{"_id":"node_modules/hexo-theme-fluid/source/img/loading.gif","hash":"2d2fc0f947940f98c21afafef39ecf226a2e8d55","modified":1694157197130},{"_id":"node_modules/hexo-theme-fluid/source/img/police_beian.png","hash":"90efded6baa2dde599a9d6b1387973e8e64923ea","modified":1694157197380},{"_id":"node_modules/hexo-theme-fluid/source/xml/local-search.xml","hash":"8c96ba6a064705602ce28d096fd7dd9069630a55","modified":1694157197519},{"_id":"node_modules/hexo-theme-fluid/layout/_partials/comments/discuss.ejs","hash":"98d065b58ce06b7d18bff3c974e96fa0f34ae03a","modified":1694157196946},{"_id":"node_modules/hexo-theme-fluid/layout/_partials/comments/changyan.ejs","hash":"c9b2d68ed3d375f1953e7007307d2a3f75ed6249","modified":1694157196913},{"_id":"node_modules/hexo-theme-fluid/layout/_partials/comments/cusdis.ejs","hash":"5f9dc012be27040bbe874d0c093c0d53958cc987","modified":1694157196936},{"_id":"node_modules/hexo-theme-fluid/layout/_partials/comments/disqus.ejs","hash":"aab4a4d24c55231a37db308ae94414319cecdd9b","modified":1694157196949},{"_id":"node_modules/hexo-theme-fluid/layout/_partials/comments/giscus.ejs","hash":"95f8b866b158eff9352c381c243b332a155a5110","modified":1694157196962},{"_id":"node_modules/hexo-theme-fluid/layout/_partials/comments/gitalk.ejs","hash":"843bc141a4545eb20d1c92fb63c85d459b4271ec","modified":1694157196966},{"_id":"node_modules/hexo-theme-fluid/layout/_partials/comments/livere.ejs","hash":"2264758fed57542a7389c7aa9f00f1aefa17eb87","modified":1694157196991},{"_id":"node_modules/hexo-theme-fluid/layout/_partials/comments/remark42.ejs","hash":"d4e9532feeb02aed61bd15eda536b5b631454dac","modified":1694157197034},{"_id":"node_modules/hexo-theme-fluid/layout/_partials/comments/twikoo.ejs","hash":"d84bcb5ccd78470a60c067fc914ac0ac67ac8777","modified":1694157197090},{"_id":"node_modules/hexo-theme-fluid/layout/_partials/comments/utterances.ejs","hash":"c7ccf7f28308334a6da6f5425b141a24b5eca0e2","modified":1694157197103},{"_id":"node_modules/hexo-theme-fluid/layout/_partials/comments/valine.ejs","hash":"19ba937553dddd317f827d682661a1066a7b1f30","modified":1694157197105},{"_id":"node_modules/hexo-theme-fluid/layout/_partials/comments/waline.ejs","hash":"12727da7cf3ac83443270f550be4d1c06135b52b","modified":1694157197123},{"_id":"node_modules/hexo-theme-fluid/layout/_partials/footer/beian.ejs","hash":"4fb9b5dd3f3e41a586d6af44e5069afe7c81fff2","modified":1694157196886},{"_id":"node_modules/hexo-theme-fluid/layout/_partials/footer/statistics.ejs","hash":"454d8dd4c39f9494ebeb03ca0746f5bc122af76a","modified":1694157197049},{"_id":"node_modules/hexo-theme-fluid/layout/_partials/header/banner.ejs","hash":"e07757b59e7b89eea213d0e595cb5932f812fd32","modified":1694157196883},{"_id":"node_modules/hexo-theme-fluid/layout/_partials/header/navigation.ejs","hash":"870db75e4e403a840c4463dfeed2c9114846e7cc","modified":1694157197011},{"_id":"node_modules/hexo-theme-fluid/layout/_partials/plugins/analytics.ejs","hash":"4f68c80bd1395e2f6d11e373116e54de11cb62e8","modified":1694157196867},{"_id":"node_modules/hexo-theme-fluid/layout/_partials/plugins/anchorjs.ejs","hash":"40181442d3a2b8734783a0ad7caf2d2522e3f2ab","modified":1694157196869},{"_id":"node_modules/hexo-theme-fluid/layout/_partials/plugins/code-widget.ejs","hash":"3a505cba37942badf62a56bbb8b605b72af330aa","modified":1694157196915},{"_id":"node_modules/hexo-theme-fluid/layout/_partials/plugins/encrypt.ejs","hash":"0fff24cf5bf99fbe5c56c292e2eac4a89bf29db4","modified":1694157196953},{"_id":"node_modules/hexo-theme-fluid/layout/_partials/plugins/fancybox.ejs","hash":"9d1ea2a46b8c8ad8c168594d578f40764818ef13","modified":1694157196955},{"_id":"node_modules/hexo-theme-fluid/layout/_partials/plugins/highlight.ejs","hash":"7529dd215b09d3557804333942377b9e20fa554e","modified":1694157196982},{"_id":"node_modules/hexo-theme-fluid/layout/_partials/plugins/math.ejs","hash":"dcbf9a381ee76f2f1f75fcbc22c50a502ec85023","modified":1694157196997},{"_id":"node_modules/hexo-theme-fluid/layout/_partials/plugins/mermaid.ejs","hash":"03ac02762f801970d1c4e73d6ec8d4c503780e50","modified":1694157196999},{"_id":"node_modules/hexo-theme-fluid/layout/_partials/plugins/nprogress.ejs","hash":"4c2d39ce816b8a6dcd6b53113c8695f8bd650a23","modified":1694157197014},{"_id":"node_modules/hexo-theme-fluid/layout/_partials/plugins/typed.ejs","hash":"f345374885cd6a334f09a11f59c443b5d577c06c","modified":1694157197095},{"_id":"node_modules/hexo-theme-fluid/layout/_partials/post/category-bar.ejs","hash":"8772bce97ed297e7a88523f4e939ed6436c22f87","modified":1694157196893},{"_id":"node_modules/hexo-theme-fluid/layout/_partials/post/copyright.ejs","hash":"529f3069742b3d338c769ba2d836e7f3c342a09d","modified":1694157196925},{"_id":"node_modules/hexo-theme-fluid/layout/_partials/post/meta-bottom.ejs","hash":"375974ec017696e294dc12469fb0ae257800dc2d","modified":1694157197002},{"_id":"node_modules/hexo-theme-fluid/layout/_partials/post/meta-top.ejs","hash":"ce6e9f578f4faa45840abddf8f46af3f4b69c177","modified":1694157197005},{"_id":"node_modules/hexo-theme-fluid/layout/_partials/post/sidebar-left.ejs","hash":"9992c99b3eb728ad195970e1b84d665f2c8691c4","modified":1694157197043},{"_id":"node_modules/hexo-theme-fluid/layout/_partials/post/sidebar-right.ejs","hash":"d5fcc9b60e02f869a29a8c17a16a6028ecc1e6d8","modified":1694157197046},{"_id":"node_modules/hexo-theme-fluid/layout/_partials/post/toc.ejs","hash":"635a89060fbf72eeda066fc4bd0a97462f069417","modified":1694157197074},{"_id":"node_modules/hexo-theme-fluid/scripts/events/lib/compatible-configs.js","hash":"ef474d1fa5bbafc52619ced0f9dc7eaf2affb363","modified":1694157197145},{"_id":"node_modules/hexo-theme-fluid/scripts/events/lib/footnote.js","hash":"b2f61b91fffb17d11ad56811f07d52d23f012741","modified":1694157197154},{"_id":"node_modules/hexo-theme-fluid/scripts/events/lib/hello.js","hash":"44c5eb97b98813a07c659d6afedd17fad63b1821","modified":1694157197157},{"_id":"node_modules/hexo-theme-fluid/scripts/events/lib/highlight.js","hash":"8d3ae1ec6660fbb0e563bc08c2f8deefde1f3bf6","modified":1694157197161},{"_id":"node_modules/hexo-theme-fluid/scripts/events/lib/injects.js","hash":"5ae4b07204683e54b5a1b74e931702bbce2ac23e","modified":1694157197169},{"_id":"node_modules/hexo-theme-fluid/scripts/events/lib/lazyload.js","hash":"9ba0d4bc224e22af8a5a48d6ff13e5a0fcfee2a4","modified":1694157197173},{"_id":"node_modules/hexo-theme-fluid/scripts/events/lib/merge-configs.js","hash":"7c944c43b2ece5dd84859bd9d1fe955d13427387","modified":1694157197198},{"_id":"node_modules/hexo-theme-fluid/source/css/_functions/base.styl","hash":"2e46f3f4e2c9fe34c1ff1c598738fc7349ae8188","modified":1694157197400},{"_id":"node_modules/hexo-theme-fluid/source/css/_mixins/base.styl","hash":"542e306ee9494e8a78e44d6d7d409605d94caeb3","modified":1694157197403},{"_id":"node_modules/hexo-theme-fluid/source/css/_pages/pages.styl","hash":"b8e887bc7fb3b765a1f8ec9448eff8603a41984f","modified":1694157197492},{"_id":"node_modules/hexo-theme-fluid/source/css/_variables/base.styl","hash":"4ed5f0ae105ef4c7dd92eaf652ceda176c38e502","modified":1694157197424},{"_id":"node_modules/hexo-theme-fluid/source/css/_pages/_archive/archive.styl","hash":"c475e6681546d30350eaed11f23081ecae80c375","modified":1694157197396},{"_id":"node_modules/hexo-theme-fluid/source/css/_pages/_about/about.styl","hash":"97fe42516ea531fdad771489b68aa8b2a7f6ae46","modified":1694157197384},{"_id":"node_modules/hexo-theme-fluid/source/css/_pages/_base/base.styl","hash":"643284c567665f96915f0b64e59934dda315f74d","modified":1694157197419},{"_id":"node_modules/hexo-theme-fluid/source/css/_pages/_base/color-schema.styl","hash":"e413212e5a667d5b8299c4d2a39c4dfa1378d119","modified":1694157197452},{"_id":"node_modules/hexo-theme-fluid/source/css/_pages/_base/inline.styl","hash":"411a3fa3f924a87e00ff04d18b5c83283b049a4d","modified":1694157197476},{"_id":"node_modules/hexo-theme-fluid/source/css/_pages/_base/keyframes.styl","hash":"94065ea50f5bef7566d184f2422f6ac20866ba22","modified":1694157197478},{"_id":"node_modules/hexo-theme-fluid/source/css/_pages/_index/index.styl","hash":"0acbd71633bcc7191672ea4e1b2277bea350d73b","modified":1694157197474},{"_id":"node_modules/hexo-theme-fluid/source/css/_pages/_base/print.styl","hash":"166afbc596ea4b552bad7290ec372d25ec34db7b","modified":1694157197503},{"_id":"node_modules/hexo-theme-fluid/source/css/_pages/_category/category-bar.styl","hash":"cc6df43fef6bb3efecbfdd8b9e467424a1dea581","modified":1694157197443},{"_id":"node_modules/hexo-theme-fluid/source/css/_pages/_category/category-chain.styl","hash":"0cdf7ef50dfd0669d3b257821384ff31cd81b7c9","modified":1694157197447},{"_id":"node_modules/hexo-theme-fluid/source/css/_pages/_category/category-list.styl","hash":"7edfe1b571ecca7d08f5f4dbcf76f4ffdcfbf0b5","modified":1694157197450},{"_id":"node_modules/hexo-theme-fluid/source/css/_pages/_links/links.styl","hash":"5c7f2044e3f1da05a3229537c06bd879836f8d6e","modified":1694157197481},{"_id":"node_modules/hexo-theme-fluid/source/css/_pages/_post/comment.styl","hash":"780f3788e7357bcd3f3262d781cb91bb53976a93","modified":1694157197458},{"_id":"node_modules/hexo-theme-fluid/source/css/_pages/_post/highlight.styl","hash":"4df764d298fe556e501db4afc2b05686fe6ebcfb","modified":1694157197467},{"_id":"node_modules/hexo-theme-fluid/source/css/_pages/_post/markdown.styl","hash":"1e3d3a82721e7c10bcfcecec6d81cf2979039452","modified":1694157197483},{"_id":"node_modules/hexo-theme-fluid/source/css/_pages/_post/post-page.styl","hash":"ecf3488566b374d564ae985c61e08562ba908023","modified":1694157197498},{"_id":"node_modules/hexo-theme-fluid/source/css/_pages/_post/post-tag.styl","hash":"27f70062415ccf66a9b6f4952db124fc1471fda5","modified":1694157197501},{"_id":"node_modules/hexo-theme-fluid/source/css/_pages/_tag/tags.styl","hash":"65bfc01c76abc927fa1a23bf2422892b0d566c3f","modified":1694157197516},{"_id":"node_modules/hexo-theme-fluid/source/css/_pages/_base/_widget/anchorjs.styl","hash":"e0cebda4a6f499aff75e71417d88caa7ceb13b94","modified":1694157197393},{"_id":"node_modules/hexo-theme-fluid/source/css/_pages/_base/_widget/banner.styl","hash":"7a0bd629bc234fc75e3cc8e3715ffada92f09e73","modified":1694157197399},{"_id":"node_modules/hexo-theme-fluid/source/css/_pages/_base/_widget/code-widget.styl","hash":"b66ab013f0f37d724a149b85b3c7432afcf460ad","modified":1694157197451},{"_id":"node_modules/hexo-theme-fluid/source/css/_pages/_base/_widget/board.styl","hash":"4397037fc3f0033dbe546c33cd9dbdabd8cb1632","modified":1694157197428},{"_id":"node_modules/hexo-theme-fluid/source/css/_pages/_base/_widget/copyright.styl","hash":"26f71a9cd60d96bb0cb5bbdf58150b8e524d9707","modified":1694157197459},{"_id":"node_modules/hexo-theme-fluid/source/css/_pages/_base/_widget/footer.styl","hash":"2caaca71dd1ff63d583099ed817677dd267b457e","modified":1694157197460},{"_id":"node_modules/hexo-theme-fluid/source/css/_pages/_base/_widget/footnote.styl","hash":"ae9289cc89649af2042907f8a003303b987f3404","modified":1694157197461},{"_id":"node_modules/hexo-theme-fluid/source/css/_pages/_base/_widget/header.styl","hash":"c4459248c66ea1326feed021179b847ae91d465f","modified":1694157197464},{"_id":"node_modules/hexo-theme-fluid/source/css/_pages/_base/_widget/modal.styl","hash":"adf6c1e5c8e1fb41c77ce6e2258001df61245aa2","modified":1694157197486},{"_id":"node_modules/hexo-theme-fluid/source/css/_pages/_base/_widget/ngrogress.styl","hash":"5d225357b4a58d46118e6616377168336ed44cb2","modified":1694157197488},{"_id":"node_modules/hexo-theme-fluid/source/css/_pages/_base/_widget/pagination.styl","hash":"8bb1b68e5f3552cb48c2ffa31edbc53646a8fb4c","modified":1694157197493},{"_id":"node_modules/hexo-theme-fluid/source/css/_pages/_base/_widget/noscript.styl","hash":"0cf2f2bb44f456150d428016675d5876a9d2e2aa","modified":1694157197489},{"_id":"node_modules/hexo-theme-fluid/source/css/_pages/_base/_widget/qrcode.styl","hash":"78704a94c0436097abfb0e0a57abeb3429c749b7","modified":1694157197505},{"_id":"node_modules/hexo-theme-fluid/source/css/_pages/_base/_widget/scroll-btn.styl","hash":"f0e429a27fa8a7658fcbddbb4d4dbe4afa12499a","modified":1694157197510},{"_id":"node_modules/hexo-theme-fluid/source/css/_pages/_base/_widget/search.styl","hash":"10f7e91a91e681fb9fe46f9df7707b9ef78707c8","modified":1694157197511},{"_id":"node_modules/hexo-theme-fluid/source/css/_pages/_base/_widget/toc.styl","hash":"9e7452aa2372153f25d7a4675c9d36d281a65d24","modified":1694157197518},{"_id":"source/img/inkscape/xml-editor.png","hash":"517160bb251dcc979f9fd18ba2361f80477c5624","modified":1694394362347},{"_id":"node_modules/hexo-theme-fluid/source/img/default.png","hash":"167a12978d80371cf578c8a2e45c24a2eb25b6fb","modified":1694157197372},{"_id":"public/local-search.xml","hash":"04368946ed5954f4a505c3260bf6b094b9af4fb2","modified":1694683493764},{"_id":"public/about/index.html","hash":"8bf0002b7926762f102aefd158942704a77140ca","modified":1694412223457},{"_id":"public/archives/index.html","hash":"30a6d1143cc5927d27fc4d7addb94fd63e50b406","modified":1694412223457},{"_id":"public/archives/2023/index.html","hash":"8e4b6b8af39df3a66913c18e3503ef410d5b4c92","modified":1694412223457},{"_id":"public/archives/2023/09/index.html","hash":"34fbc54871654b0ee765d67d0f464213f654ff66","modified":1694412223457},{"_id":"public/tags/svg/index.html","hash":"0d0fbbf4c35b529fda587e3d6d4cc1fbaff6293e","modified":1694412223457},{"_id":"public/tags/vue/index.html","hash":"410bba2a8de5ad7a3a0f99c1ce0fe5ce7d65f528","modified":1694412223457},{"_id":"public/index.html","hash":"6081797890f4ef6b968cb809195553e4f13212ef","modified":1694683493764},{"_id":"public/404.html","hash":"bc194744c326e64cd71304b10c7a9087ae78f88e","modified":1694412223457},{"_id":"public/tags/index.html","hash":"c8aba81342f0558a800bd1d2a80c653f6d1d1868","modified":1694412223457},{"_id":"public/categories/index.html","hash":"b0a71190f21a29e693511b53b48655d3395da7ef","modified":1694412223457},{"_id":"public/2023/09/10/svg-animate/index.html","hash":"8e472ee6641b7bc76383e823b17d4d8945c1fd5f","modified":1694412223457},{"_id":"public/2023/09/08/inkscape/index.html","hash":"1559adf6aa6185d7d35d2047f5f4c899d9720ff4","modified":1694412223457},{"_id":"public/2023/09/06/micro-app/index.html","hash":"f3eaadace884fcd9f3db7b383d2b66f73a6afa25","modified":1694683493764},{"_id":"public/links/index.html","hash":"f3e9615861bb4b405929fa2d25068b67296a81fa","modified":1694412223457},{"_id":"public/img/svg/svg-1.gif","hash":"48fbf8755032832381ca43353ecc7ce4134a00f4","modified":1694412223457},{"_id":"public/img/avatar.png","hash":"fe739a158cc128f70f780eb5fa96f388b81d478f","modified":1694412223457},{"_id":"public/img/fluid.png","hash":"64b215db2cb3af98fe639e94537cb5209f959c78","modified":1694412223457},{"_id":"public/img/loading.gif","hash":"2d2fc0f947940f98c21afafef39ecf226a2e8d55","modified":1694412223457},{"_id":"public/img/police_beian.png","hash":"90efded6baa2dde599a9d6b1387973e8e64923ea","modified":1694412223457},{"_id":"public/xml/local-search.xml","hash":"8c96ba6a064705602ce28d096fd7dd9069630a55","modified":1694412223457},{"_id":"public/css/gitalk.css","hash":"a57b3cc8e04a0a4a27aefa07facf5b5e7bca0e76","modified":1694412223457},{"_id":"public/css/highlight-dark.css","hash":"2b0daa6e5343da9dbb26d617d224b8397e48556b","modified":1694412223457},{"_id":"public/css/highlight.css","hash":"0f9a477d33d3b15ebe7e163e756fb7c54c7ded6b","modified":1694412223457},{"_id":"public/js/boot.js","hash":"38bd26c6b7acdafda86dda3560e6a3ca488d3c76","modified":1694412223457},{"_id":"public/js/color-schema.js","hash":"76a198f8721352ebeaf5b2ef2f4db00612da4796","modified":1694412223457},{"_id":"public/js/events.js","hash":"89e3561488a618ed0caeb9edf18e441978e29c25","modified":1694412223457},{"_id":"public/js/img-lazyload.js","hash":"cbdeca434ec4da51f488c821d51b4d23c73294af","modified":1694412223457},{"_id":"public/js/leancloud.js","hash":"eff77c7a5c399fcaefda48884980571e15243fc9","modified":1694412223457},{"_id":"public/js/local-search.js","hash":"b9945f76f8682f3ec32edfb285b26eb559f7b7e8","modified":1694412223457},{"_id":"public/js/plugins.js","hash":"c34916291e392a774ff3e85c55badb83e8661297","modified":1694412223457},{"_id":"public/js/utils.js","hash":"b82e7c289a66dfd36064470fd41c0e96fc598b43","modified":1694412223457},{"_id":"public/css/main.css","hash":"526a4522eb54bb51772f51fb98295dc4fe03429f","modified":1694412223457},{"_id":"public/img/svg/svg-path-wather.gif","hash":"90d1445f05f8d560eef1281136a6df0c931e4f9c","modified":1694412223457},{"_id":"public/img/default.png","hash":"167a12978d80371cf578c8a2e45c24a2eb25b6fb","modified":1694412223457},{"_id":"public/img/inkscape/file-property.png","hash":"69d93c3e66073d7d4429dce8a1a7173e6449423e","modified":1694412223457},{"_id":"public/img/inkscape/file-unit.png","hash":"11ad9ed3e405cedcf58b7eb8c8476c0db6eb748a","modified":1694412223457},{"_id":"public/img/inkscape/file-export.png","hash":"0081562712294df35116aa58cc902020819eed13","modified":1694412223457},{"_id":"public/img/inkscape/xml-editor.png","hash":"517160bb251dcc979f9fd18ba2361f80477c5624","modified":1694412223457}],"Category":[],"Data":[],"Page":[{"title":"标题","layout":"about","_content":"一些杂谈文字记录","source":"about/index.md","raw":"---\ntitle: 标题\nlayout: about\n---\n一些杂谈文字记录","date":"2023-09-08T07:10:58.340Z","updated":"2023-09-08T07:10:58.340Z","path":"about/index.html","comments":1,"_id":"clmehafew000164tu72h51s04","content":"<p>一些杂谈文字记录</p>\n","site":{"data":{}},"excerpt":"","more":"<p>一些杂谈文字记录</p>\n"}],"Post":[{"title":"inkscape","date":"2023-09-08T14:50:09.000Z","_content":"\n\n# [Inkscape](https://inkscape.org/zh-hans/doc/tutorials/basic/tutorial-basic.html) SVG 自由绘图工具\n\n## 设置文档属性\n![](/img/inkscape/file-property.png)\n\n## 单位设置\n![](/img/inkscape/file-property.png)\n\n1. 单位按需设置，可选px, mm 等\n2. 画布大小按需设置宽高\n3. 设置尺寸比例，此处会影响导出未svg 时的大小，建议默认设置为1\n\n## xml 快速编辑\n![](/img/inkscape/xml-editor.png)\n\n- 通过右侧配置蓝可以快速获取页面上节点属性信息&& 编辑\n\n## 导出文件\n![](/img/inkscape/file-export.png)","source":"_posts/inkscape.md","raw":"---\ntitle: inkscape\ndate: 2023-09-08 22:50:09\ntags: svg\n---\n\n\n# [Inkscape](https://inkscape.org/zh-hans/doc/tutorials/basic/tutorial-basic.html) SVG 自由绘图工具\n\n## 设置文档属性\n![](/img/inkscape/file-property.png)\n\n## 单位设置\n![](/img/inkscape/file-property.png)\n\n1. 单位按需设置，可选px, mm 等\n2. 画布大小按需设置宽高\n3. 设置尺寸比例，此处会影响导出未svg 时的大小，建议默认设置为1\n\n## xml 快速编辑\n![](/img/inkscape/xml-editor.png)\n\n- 通过右侧配置蓝可以快速获取页面上节点属性信息&& 编辑\n\n## 导出文件\n![](/img/inkscape/file-export.png)","slug":"inkscape","published":1,"updated":"2023-09-11T01:06:02.313Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clmehafes000064tubzh2dhep","content":"<h1 id=\"Inkscape-SVG-自由绘图工具\"><a href=\"#Inkscape-SVG-自由绘图工具\" class=\"headerlink\" title=\"Inkscape SVG 自由绘图工具\"></a><a href=\"https://inkscape.org/zh-hans/doc/tutorials/basic/tutorial-basic.html\">Inkscape</a> SVG 自由绘图工具</h1><h2 id=\"设置文档属性\"><a href=\"#设置文档属性\" class=\"headerlink\" title=\"设置文档属性\"></a>设置文档属性</h2><p><img src=\"/img/inkscape/file-property.png\"></p>\n<h2 id=\"单位设置\"><a href=\"#单位设置\" class=\"headerlink\" title=\"单位设置\"></a>单位设置</h2><p><img src=\"/img/inkscape/file-property.png\"></p>\n<ol>\n<li>单位按需设置，可选px, mm 等</li>\n<li>画布大小按需设置宽高</li>\n<li>设置尺寸比例，此处会影响导出未svg 时的大小，建议默认设置为1</li>\n</ol>\n<h2 id=\"xml-快速编辑\"><a href=\"#xml-快速编辑\" class=\"headerlink\" title=\"xml 快速编辑\"></a>xml 快速编辑</h2><p><img src=\"/img/inkscape/xml-editor.png\"></p>\n<ul>\n<li>通过右侧配置蓝可以快速获取页面上节点属性信息&amp;&amp; 编辑</li>\n</ul>\n<h2 id=\"导出文件\"><a href=\"#导出文件\" class=\"headerlink\" title=\"导出文件\"></a>导出文件</h2><p><img src=\"/img/inkscape/file-export.png\"></p>\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"Inkscape-SVG-自由绘图工具\"><a href=\"#Inkscape-SVG-自由绘图工具\" class=\"headerlink\" title=\"Inkscape SVG 自由绘图工具\"></a><a href=\"https://inkscape.org/zh-hans/doc/tutorials/basic/tutorial-basic.html\">Inkscape</a> SVG 自由绘图工具</h1><h2 id=\"设置文档属性\"><a href=\"#设置文档属性\" class=\"headerlink\" title=\"设置文档属性\"></a>设置文档属性</h2><p><img src=\"/img/inkscape/file-property.png\"></p>\n<h2 id=\"单位设置\"><a href=\"#单位设置\" class=\"headerlink\" title=\"单位设置\"></a>单位设置</h2><p><img src=\"/img/inkscape/file-property.png\"></p>\n<ol>\n<li>单位按需设置，可选px, mm 等</li>\n<li>画布大小按需设置宽高</li>\n<li>设置尺寸比例，此处会影响导出未svg 时的大小，建议默认设置为1</li>\n</ol>\n<h2 id=\"xml-快速编辑\"><a href=\"#xml-快速编辑\" class=\"headerlink\" title=\"xml 快速编辑\"></a>xml 快速编辑</h2><p><img src=\"/img/inkscape/xml-editor.png\"></p>\n<ul>\n<li>通过右侧配置蓝可以快速获取页面上节点属性信息&amp;&amp; 编辑</li>\n</ul>\n<h2 id=\"导出文件\"><a href=\"#导出文件\" class=\"headerlink\" title=\"导出文件\"></a>导出文件</h2><p><img src=\"/img/inkscape/file-export.png\"></p>\n"},{"title":"micro-app 搭建记录","date":"2023-09-06T15:11:39.000Z","_content":"\n# 搭建平台基座\n\n> 基座与平台无关，技术栈 vite + vue3 + element-plus\n> [micro-app v0.8.1](https://zeroing.jd.com/micro-app/docs.html#/) \n> [micro-app 1.0.0-beta 版本](https://micro-zoe.com/docs/1.x/#/zh-cn/start)\n\n## 通过vite 脚手架搭建项目\n\n\n\n```bash\n# npm 7+, extra double-dash is needed:\nnpm create vite@latest my-vue-app -- --template vue-ts\n\n```\n- 安装 micro-app \n``` bash\nnpm i @micro-zoe/micro-app --save\n```\n\n- 入口文件添加 **micro-app**\n```typescript\n import microApp from '@micro-zoe/micro-app';\n microApp.start({\n    destroy: true\n })\n\nconst app = createApp()\napp.mount('#root')\n\n```\n\n## 安装element-plus \n| 由于 micro-app 基座应用的样式类无法被隔离，建议修改elment-plus样式类的命名空间\n```bash\nnpm i element-plus\n```\n修改 element-plus 命名空间\nelement plus 当前可以全局导入，如果需要按需导入修改命名空间 可参考官网\n\n**设置 ElConfigProvider**\n使用 ElConfigProvider 包装您的根组件。\n```vue\n<!-- App.vue -->\n<template>\n  <el-config-provider namespace=\"sk\">\n    <router-view></router-view>\n  </el-config-provider>\n</template>\n```\n**设置 SCSS 和 CSS 变量**\n创建 styles/element/index.scss：\n```scss\n// styles/element/index.scss\n// we can add this to custom namespace, default is 'el'\n@forward 'element-plus/theme-chalk/src/mixins/config.scss' with (\n  $namespace: 'sk'\n);\n\n@use \"element-plus/theme-chalk/src/index.scss\" as *;\n// ...\n\n```\n在 vite.config.ts 中导入 styles/element/index.scss：\n```ts\nimport { defineConfig } from 'vite'\n// https://vitejs.dev/config/\nexport default defineConfig({\n  // ...\n  css: {\n    preprocessorOptions: {\n      scss: {\n        additionalData: `@use \"~/styles/element/index.scss\" as *;`,\n      },\n    },\n  },\n  // ...\n})\n```\n\n## 子应用 vite 挂载\n\n- 挂载子应用路由\n```ts\nconst router = createRouter({\n  history: createWebHistory(import.meta.env.BASE_URL),\n  routes: [\n    ...,\n    {\n      path: '/mse:*',\n      name: 'mse',\n      component: () => import('@/views/mse/index.vue'),\n    },\n  ],\n});\n\n```\n- vite子应用组件挂载\n子应用micro-app 中需要区分 URL与baseroute 关系具体可[参考官网](https://zeroing.jd.com/micro-app/docs.html#/zh-cn/route)\n  - URL 为获取index.html静态资源的加载路由\n  - baseroute 为下发子应用的区分路由\n\n### 关闭 disable-sandbox\n\n```ts\n<template>\n  <div class=\"mse-iframe-container\">\n  // 加载vite 应用需要关闭沙箱\n    <micro-app name=\"mse\" url=\"http://localhost:8004\" :data=\"{}\" baseroute=\"/child/vite-vue\" inline disablesandbox></micro-app>\n  </div>\n</template>\n<script setup lang=\"ts\">\nimport { EventCenterForMicroApp } from '@micro-zoe/micro-app'\nimport config, { getAppUrl } from '@/micro-app/config.ts'\nimport { ref } from 'vue';\n// @ts-ignore 因为vite子应用关闭了沙箱，我们需要为子应用mse创建EventCenterForMicroApp对象来实现数据通信\nwindow.eventCenterForAppNameVite = new EventCenterForMicroApp('mse')\n</script>\n<style lang=\"less\" scoped>\n.mse-iframe-container {\n  height: 100%;\n}\n</style>\n```\n\n### Iframe 沙箱模式加载(BETA 1.0 公测支持)\n> 推荐使用\n```ts\n<template>\n  <div>\n    <micro-app :name=\"name\" :url=\"url\" :data=\"data\" iframe></micro-app>\n  </div>\n</template>\n<script setup lang=\"ts\">\nimport config, { getAppUrl } from '@/micro-app/config.ts'\nimport { ref } from 'vue';\nimport { useMicroData } from '@/micro-app/micro-data-hooks';\nconst name = config.mse.appName\nconst url = ref('http://localhost:9001')\nconst data = reactive({})\n</script>\n```\n\n# vite 子应用\n> 按照正常方式搭建vite 子应用，main.ts && serve 服务需要改造\n\n## 关闭 disable-sandbox 模式 子应用的 main.ts 配置\n### main.ts 入口文件文件\n```ts\nfunction handleMicroData () {\n  // eventCenterForAppNameVite 是基座添加到window的数据通信对象\n  if (window.eventCenterForAppNameVite) {\n    // 主动获取基座下发的数据\n    const rootData = window.eventCenterForAppNameVite.getData()\n    console.log(rootData)\n  }\n}\nconst app = createApp(App)\napp.use(router);\napp.mount('#app')\n\nhandleMicroData()\n// 监听卸载操作\nwindow.addEventListener('unmount', function () {\n  app.unmount()\n  // 卸载所有数据监听函数\n  window.eventCenterForAppNameVite?.clearDataListener()\n})\n\n```\n### vite.config.ts 配置\n- server 需要支持 跨域请求\n- 打包时处理\n  - 指定域名设置\n  - 通过动态basePath插件 vite-plugin-dynamic-base  类似webpack \\_\\_webpack_public_path\\_\\_\n  \n```ts\nimport { fileURLToPath, URL } from 'node:url'\n\nimport { defineConfig } from 'vite'\nimport vue from '@vitejs/plugin-vue'\nimport vueJsx from '@vitejs/plugin-vue-jsx'\nimport { dynamicBase } from 'vite-plugin-dynamic-base'\n// https://vitejs.dev/config/\nexport default defineConfig({\n  base: process.env.NODE_ENV === \"production\" ? \"__dynamic_base__\" : \"/child/vite-vue/\",\n  plugins: [\n    vue(),\n    vueJsx(),\n    //打包后 \n    dynamicBase({\n      publicPath: 'window.__dynamic_base__',\n      transformIndexHtml:  true\n    })\n  ],\n  server: {\n    port: 8004,\n    headers: {\n      'Access-Control-Allow-Origin': '*',\n    },\n    cors: true,\n  },\n  resolve: {\n    alias: {\n      '@': fileURLToPath(new URL('./src', import.meta.url))\n    }\n  }\n})\n\n```\n\n# 部署\n[参考官网配置](https://zeroing.jd.com/micro-app/docs.html#/zh-cn/deploy)\n\n# 问题&&解决方案\n1. 部署后无法加载vite 子应用，原因可能\n   - window.\\_\\_dynamic_base\\_\\_ 属性未初始化成功\n   - 基座应用加载vite-vue 子应用时使用了预加载模式，\n\n2. 父子资源样式相互污染\n   - 如果基座样式库使用 elment-plus 可以通过自定义命名空间规避污染\n   - 开启沙盒模式进行样式隔离","source":"_posts/micro-app.md","raw":"---\ntitle: micro-app 搭建记录\ndate: 2023-09-06 23:11:39\ntags: vue\n---\n\n# 搭建平台基座\n\n> 基座与平台无关，技术栈 vite + vue3 + element-plus\n> [micro-app v0.8.1](https://zeroing.jd.com/micro-app/docs.html#/) \n> [micro-app 1.0.0-beta 版本](https://micro-zoe.com/docs/1.x/#/zh-cn/start)\n\n## 通过vite 脚手架搭建项目\n\n\n\n```bash\n# npm 7+, extra double-dash is needed:\nnpm create vite@latest my-vue-app -- --template vue-ts\n\n```\n- 安装 micro-app \n``` bash\nnpm i @micro-zoe/micro-app --save\n```\n\n- 入口文件添加 **micro-app**\n```typescript\n import microApp from '@micro-zoe/micro-app';\n microApp.start({\n    destroy: true\n })\n\nconst app = createApp()\napp.mount('#root')\n\n```\n\n## 安装element-plus \n| 由于 micro-app 基座应用的样式类无法被隔离，建议修改elment-plus样式类的命名空间\n```bash\nnpm i element-plus\n```\n修改 element-plus 命名空间\nelement plus 当前可以全局导入，如果需要按需导入修改命名空间 可参考官网\n\n**设置 ElConfigProvider**\n使用 ElConfigProvider 包装您的根组件。\n```vue\n<!-- App.vue -->\n<template>\n  <el-config-provider namespace=\"sk\">\n    <router-view></router-view>\n  </el-config-provider>\n</template>\n```\n**设置 SCSS 和 CSS 变量**\n创建 styles/element/index.scss：\n```scss\n// styles/element/index.scss\n// we can add this to custom namespace, default is 'el'\n@forward 'element-plus/theme-chalk/src/mixins/config.scss' with (\n  $namespace: 'sk'\n);\n\n@use \"element-plus/theme-chalk/src/index.scss\" as *;\n// ...\n\n```\n在 vite.config.ts 中导入 styles/element/index.scss：\n```ts\nimport { defineConfig } from 'vite'\n// https://vitejs.dev/config/\nexport default defineConfig({\n  // ...\n  css: {\n    preprocessorOptions: {\n      scss: {\n        additionalData: `@use \"~/styles/element/index.scss\" as *;`,\n      },\n    },\n  },\n  // ...\n})\n```\n\n## 子应用 vite 挂载\n\n- 挂载子应用路由\n```ts\nconst router = createRouter({\n  history: createWebHistory(import.meta.env.BASE_URL),\n  routes: [\n    ...,\n    {\n      path: '/mse:*',\n      name: 'mse',\n      component: () => import('@/views/mse/index.vue'),\n    },\n  ],\n});\n\n```\n- vite子应用组件挂载\n子应用micro-app 中需要区分 URL与baseroute 关系具体可[参考官网](https://zeroing.jd.com/micro-app/docs.html#/zh-cn/route)\n  - URL 为获取index.html静态资源的加载路由\n  - baseroute 为下发子应用的区分路由\n\n### 关闭 disable-sandbox\n\n```ts\n<template>\n  <div class=\"mse-iframe-container\">\n  // 加载vite 应用需要关闭沙箱\n    <micro-app name=\"mse\" url=\"http://localhost:8004\" :data=\"{}\" baseroute=\"/child/vite-vue\" inline disablesandbox></micro-app>\n  </div>\n</template>\n<script setup lang=\"ts\">\nimport { EventCenterForMicroApp } from '@micro-zoe/micro-app'\nimport config, { getAppUrl } from '@/micro-app/config.ts'\nimport { ref } from 'vue';\n// @ts-ignore 因为vite子应用关闭了沙箱，我们需要为子应用mse创建EventCenterForMicroApp对象来实现数据通信\nwindow.eventCenterForAppNameVite = new EventCenterForMicroApp('mse')\n</script>\n<style lang=\"less\" scoped>\n.mse-iframe-container {\n  height: 100%;\n}\n</style>\n```\n\n### Iframe 沙箱模式加载(BETA 1.0 公测支持)\n> 推荐使用\n```ts\n<template>\n  <div>\n    <micro-app :name=\"name\" :url=\"url\" :data=\"data\" iframe></micro-app>\n  </div>\n</template>\n<script setup lang=\"ts\">\nimport config, { getAppUrl } from '@/micro-app/config.ts'\nimport { ref } from 'vue';\nimport { useMicroData } from '@/micro-app/micro-data-hooks';\nconst name = config.mse.appName\nconst url = ref('http://localhost:9001')\nconst data = reactive({})\n</script>\n```\n\n# vite 子应用\n> 按照正常方式搭建vite 子应用，main.ts && serve 服务需要改造\n\n## 关闭 disable-sandbox 模式 子应用的 main.ts 配置\n### main.ts 入口文件文件\n```ts\nfunction handleMicroData () {\n  // eventCenterForAppNameVite 是基座添加到window的数据通信对象\n  if (window.eventCenterForAppNameVite) {\n    // 主动获取基座下发的数据\n    const rootData = window.eventCenterForAppNameVite.getData()\n    console.log(rootData)\n  }\n}\nconst app = createApp(App)\napp.use(router);\napp.mount('#app')\n\nhandleMicroData()\n// 监听卸载操作\nwindow.addEventListener('unmount', function () {\n  app.unmount()\n  // 卸载所有数据监听函数\n  window.eventCenterForAppNameVite?.clearDataListener()\n})\n\n```\n### vite.config.ts 配置\n- server 需要支持 跨域请求\n- 打包时处理\n  - 指定域名设置\n  - 通过动态basePath插件 vite-plugin-dynamic-base  类似webpack \\_\\_webpack_public_path\\_\\_\n  \n```ts\nimport { fileURLToPath, URL } from 'node:url'\n\nimport { defineConfig } from 'vite'\nimport vue from '@vitejs/plugin-vue'\nimport vueJsx from '@vitejs/plugin-vue-jsx'\nimport { dynamicBase } from 'vite-plugin-dynamic-base'\n// https://vitejs.dev/config/\nexport default defineConfig({\n  base: process.env.NODE_ENV === \"production\" ? \"__dynamic_base__\" : \"/child/vite-vue/\",\n  plugins: [\n    vue(),\n    vueJsx(),\n    //打包后 \n    dynamicBase({\n      publicPath: 'window.__dynamic_base__',\n      transformIndexHtml:  true\n    })\n  ],\n  server: {\n    port: 8004,\n    headers: {\n      'Access-Control-Allow-Origin': '*',\n    },\n    cors: true,\n  },\n  resolve: {\n    alias: {\n      '@': fileURLToPath(new URL('./src', import.meta.url))\n    }\n  }\n})\n\n```\n\n# 部署\n[参考官网配置](https://zeroing.jd.com/micro-app/docs.html#/zh-cn/deploy)\n\n# 问题&&解决方案\n1. 部署后无法加载vite 子应用，原因可能\n   - window.\\_\\_dynamic_base\\_\\_ 属性未初始化成功\n   - 基座应用加载vite-vue 子应用时使用了预加载模式，\n\n2. 父子资源样式相互污染\n   - 如果基座样式库使用 elment-plus 可以通过自定义命名空间规避污染\n   - 开启沙盒模式进行样式隔离","slug":"micro-app","published":1,"updated":"2023-09-14T09:40:56.028Z","_id":"clmehafew000264tuhdp28zj4","comments":1,"layout":"post","photos":[],"link":"","content":"<h1 id=\"搭建平台基座\"><a href=\"#搭建平台基座\" class=\"headerlink\" title=\"搭建平台基座\"></a>搭建平台基座</h1><blockquote>\n<p>基座与平台无关，技术栈 vite + vue3 + element-plus<br><a href=\"https://zeroing.jd.com/micro-app/docs.html#/\">micro-app v0.8.1</a><br><a href=\"https://micro-zoe.com/docs/1.x/#/zh-cn/start\">micro-app 1.0.0-beta 版本</a></p>\n</blockquote>\n<h2 id=\"通过vite-脚手架搭建项目\"><a href=\"#通过vite-脚手架搭建项目\" class=\"headerlink\" title=\"通过vite 脚手架搭建项目\"></a>通过vite 脚手架搭建项目</h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\"><span class=\"hljs-comment\"># npm 7+, extra double-dash is needed:</span><br>npm create vite@latest my-vue-app -- --template vue-ts<br><br></code></pre></td></tr></table></figure>\n<ul>\n<li><p>安装 micro-app </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">npm i @micro-zoe/micro-app --save<br></code></pre></td></tr></table></figure>\n</li>\n<li><p>入口文件添加 <strong>micro-app</strong></p>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs typescript\"> <span class=\"hljs-keyword\">import</span> microApp <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">&#x27;@micro-zoe/micro-app&#x27;</span>;<br> microApp.<span class=\"hljs-title function_\">start</span>(&#123;<br>    <span class=\"hljs-attr\">destroy</span>: <span class=\"hljs-literal\">true</span><br> &#125;)<br><br><span class=\"hljs-keyword\">const</span> app = <span class=\"hljs-title function_\">createApp</span>()<br>app.<span class=\"hljs-title function_\">mount</span>(<span class=\"hljs-string\">&#x27;#root&#x27;</span>)<br><br></code></pre></td></tr></table></figure></li>\n</ul>\n<h2 id=\"安装element-plus\"><a href=\"#安装element-plus\" class=\"headerlink\" title=\"安装element-plus\"></a>安装element-plus</h2><p>| 由于 micro-app 基座应用的样式类无法被隔离，建议修改elment-plus样式类的命名空间</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">npm i element-plus<br></code></pre></td></tr></table></figure>\n<p>修改 element-plus 命名空间<br>element plus 当前可以全局导入，如果需要按需导入修改命名空间 可参考官网</p>\n<p><strong>设置 ElConfigProvider</strong><br>使用 ElConfigProvider 包装您的根组件。</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs vue\">&lt;!-- App.vue --&gt;<br>&lt;template&gt;<br>  &lt;el-config-provider namespace=&quot;sk&quot;&gt;<br>    &lt;router-view&gt;&lt;/router-view&gt;<br>  &lt;/el-config-provider&gt;<br>&lt;/template&gt;<br></code></pre></td></tr></table></figure>\n<p><strong>设置 SCSS 和 CSS 变量</strong><br>创建 styles&#x2F;element&#x2F;index.scss：</p>\n<figure class=\"highlight scss\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs scss\"><span class=\"hljs-comment\">// styles/element/index.scss</span><br><span class=\"hljs-comment\">// we can add this to custom namespace, default is &#x27;el&#x27;</span><br><span class=\"hljs-keyword\">@forward</span> <span class=\"hljs-string\">&#x27;element-plus/theme-chalk/src/mixins/config.scss&#x27;</span> with (<br>  <span class=\"hljs-variable\">$namespace</span>: <span class=\"hljs-string\">&#x27;sk&#x27;</span><br>);<br><br><span class=\"hljs-keyword\">@use</span> <span class=\"hljs-string\">&quot;element-plus/theme-chalk/src/index.scss&quot;</span> as *;<br><span class=\"hljs-comment\">// ...</span><br><br></code></pre></td></tr></table></figure>\n<p>在 vite.config.ts 中导入 styles&#x2F;element&#x2F;index.scss：</p>\n<figure class=\"highlight ts\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs ts\"><span class=\"hljs-keyword\">import</span> &#123; defineConfig &#125; <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">&#x27;vite&#x27;</span><br><span class=\"hljs-comment\">// https://vitejs.dev/config/</span><br><span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">default</span> <span class=\"hljs-title function_\">defineConfig</span>(&#123;<br>  <span class=\"hljs-comment\">// ...</span><br>  <span class=\"hljs-attr\">css</span>: &#123;<br>    <span class=\"hljs-attr\">preprocessorOptions</span>: &#123;<br>      <span class=\"hljs-attr\">scss</span>: &#123;<br>        <span class=\"hljs-attr\">additionalData</span>: <span class=\"hljs-string\">`@use &quot;~/styles/element/index.scss&quot; as *;`</span>,<br>      &#125;,<br>    &#125;,<br>  &#125;,<br>  <span class=\"hljs-comment\">// ...</span><br>&#125;)<br></code></pre></td></tr></table></figure>\n\n<h2 id=\"子应用-vite-挂载\"><a href=\"#子应用-vite-挂载\" class=\"headerlink\" title=\"子应用 vite 挂载\"></a>子应用 vite 挂载</h2><ul>\n<li>挂载子应用路由<figure class=\"highlight ts\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs ts\"><span class=\"hljs-keyword\">const</span> router = <span class=\"hljs-title function_\">createRouter</span>(&#123;<br>  <span class=\"hljs-attr\">history</span>: <span class=\"hljs-title function_\">createWebHistory</span>(<span class=\"hljs-keyword\">import</span>.<span class=\"hljs-property\">meta</span>.<span class=\"hljs-property\">env</span>.<span class=\"hljs-property\">BASE_URL</span>),<br>  <span class=\"hljs-attr\">routes</span>: [<br>    ...,<br>    &#123;<br>      <span class=\"hljs-attr\">path</span>: <span class=\"hljs-string\">&#x27;/mse:*&#x27;</span>,<br>      <span class=\"hljs-attr\">name</span>: <span class=\"hljs-string\">&#x27;mse&#x27;</span>,<br>      <span class=\"hljs-attr\">component</span>: <span class=\"hljs-function\">() =&gt;</span> <span class=\"hljs-keyword\">import</span>(<span class=\"hljs-string\">&#x27;@/views/mse/index.vue&#x27;</span>),<br>    &#125;,<br>  ],<br>&#125;);<br><br></code></pre></td></tr></table></figure></li>\n<li>vite子应用组件挂载<br>子应用micro-app 中需要区分 URL与baseroute 关系具体可<a href=\"https://zeroing.jd.com/micro-app/docs.html#/zh-cn/route\">参考官网</a><ul>\n<li>URL 为获取index.html静态资源的加载路由</li>\n<li>baseroute 为下发子应用的区分路由</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"关闭-disable-sandbox\"><a href=\"#关闭-disable-sandbox\" class=\"headerlink\" title=\"关闭 disable-sandbox\"></a>关闭 disable-sandbox</h3><figure class=\"highlight ts\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs ts\">&lt;template&gt;<br>  <span class=\"language-xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;mse-iframe-container&quot;</span>&gt;</span></span><br><span class=\"language-xml\">  // 加载vite 应用需要关闭沙箱</span><br><span class=\"language-xml\">    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">micro-app</span> <span class=\"hljs-attr\">name</span>=<span class=\"hljs-string\">&quot;mse&quot;</span> <span class=\"hljs-attr\">url</span>=<span class=\"hljs-string\">&quot;http://localhost:8004&quot;</span> <span class=\"hljs-attr\">:data</span>=<span class=\"hljs-string\">&quot;&#123;&#125;&quot;</span> <span class=\"hljs-attr\">baseroute</span>=<span class=\"hljs-string\">&quot;/child/vite-vue&quot;</span> <span class=\"hljs-attr\">inline</span> <span class=\"hljs-attr\">disablesandbox</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">micro-app</span>&gt;</span></span><br><span class=\"language-xml\">  <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span></span><br>&lt;/template&gt;<br><span class=\"language-xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">script</span> <span class=\"hljs-attr\">setup</span> <span class=\"hljs-attr\">lang</span>=<span class=\"hljs-string\">&quot;ts&quot;</span>&gt;</span><span class=\"language-javascript\"></span></span><br><span class=\"language-javascript\"><span class=\"language-xml\"><span class=\"hljs-keyword\">import</span> &#123; <span class=\"hljs-title class_\">EventCenterForMicroApp</span> &#125; <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">&#x27;@micro-zoe/micro-app&#x27;</span></span></span><br><span class=\"language-javascript\"><span class=\"language-xml\"><span class=\"hljs-keyword\">import</span> config, &#123; getAppUrl &#125; <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">&#x27;@/micro-app/config.ts&#x27;</span></span></span><br><span class=\"language-javascript\"><span class=\"language-xml\"><span class=\"hljs-keyword\">import</span> &#123; ref &#125; <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">&#x27;vue&#x27;</span>;</span></span><br><span class=\"language-javascript\"><span class=\"language-xml\"><span class=\"hljs-comment\">// @ts-ignore 因为vite子应用关闭了沙箱，我们需要为子应用mse创建EventCenterForMicroApp对象来实现数据通信</span></span></span><br><span class=\"language-javascript\"><span class=\"language-xml\"><span class=\"hljs-variable language_\">window</span>.<span class=\"hljs-property\">eventCenterForAppNameVite</span> = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">EventCenterForMicroApp</span>(<span class=\"hljs-string\">&#x27;mse&#x27;</span>)</span></span><br><span class=\"language-javascript\"><span class=\"language-xml\"></span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">script</span>&gt;</span></span><br><span class=\"language-xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">style</span> <span class=\"hljs-attr\">lang</span>=<span class=\"hljs-string\">&quot;less&quot;</span> <span class=\"hljs-attr\">scoped</span>&gt;</span><span class=\"language-css\"></span></span><br><span class=\"language-css\"><span class=\"language-xml\"><span class=\"hljs-selector-class\">.mse-iframe-container</span> &#123;</span></span><br><span class=\"language-css\"><span class=\"language-xml\">  <span class=\"hljs-attribute\">height</span>: <span class=\"hljs-number\">100%</span>;</span></span><br><span class=\"language-css\"><span class=\"language-xml\">&#125;</span></span><br><span class=\"language-css\"><span class=\"language-xml\"></span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">style</span>&gt;</span></span><br></code></pre></td></tr></table></figure>\n\n<h3 id=\"Iframe-沙箱模式加载-BETA-1-0-公测支持\"><a href=\"#Iframe-沙箱模式加载-BETA-1-0-公测支持\" class=\"headerlink\" title=\"Iframe 沙箱模式加载(BETA 1.0 公测支持)\"></a>Iframe 沙箱模式加载(BETA 1.0 公测支持)</h3><blockquote>\n<p>推荐使用</p>\n</blockquote>\n<figure class=\"highlight ts\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs ts\">&lt;template&gt;<br>  <span class=\"language-xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span>&gt;</span></span><br><span class=\"language-xml\">    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">micro-app</span> <span class=\"hljs-attr\">:name</span>=<span class=\"hljs-string\">&quot;name&quot;</span> <span class=\"hljs-attr\">:url</span>=<span class=\"hljs-string\">&quot;url&quot;</span> <span class=\"hljs-attr\">:data</span>=<span class=\"hljs-string\">&quot;data&quot;</span> <span class=\"hljs-attr\">iframe</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">micro-app</span>&gt;</span></span><br><span class=\"language-xml\">  <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span></span><br>&lt;/template&gt;<br><span class=\"language-xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">script</span> <span class=\"hljs-attr\">setup</span> <span class=\"hljs-attr\">lang</span>=<span class=\"hljs-string\">&quot;ts&quot;</span>&gt;</span><span class=\"language-javascript\"></span></span><br><span class=\"language-javascript\"><span class=\"language-xml\"><span class=\"hljs-keyword\">import</span> config, &#123; getAppUrl &#125; <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">&#x27;@/micro-app/config.ts&#x27;</span></span></span><br><span class=\"language-javascript\"><span class=\"language-xml\"><span class=\"hljs-keyword\">import</span> &#123; ref &#125; <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">&#x27;vue&#x27;</span>;</span></span><br><span class=\"language-javascript\"><span class=\"language-xml\"><span class=\"hljs-keyword\">import</span> &#123; useMicroData &#125; <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">&#x27;@/micro-app/micro-data-hooks&#x27;</span>;</span></span><br><span class=\"language-javascript\"><span class=\"language-xml\"><span class=\"hljs-keyword\">const</span> name = config.<span class=\"hljs-property\">mse</span>.<span class=\"hljs-property\">appName</span></span></span><br><span class=\"language-javascript\"><span class=\"language-xml\"><span class=\"hljs-keyword\">const</span> url = <span class=\"hljs-title function_\">ref</span>(<span class=\"hljs-string\">&#x27;http://localhost:9001&#x27;</span>)</span></span><br><span class=\"language-javascript\"><span class=\"language-xml\"><span class=\"hljs-keyword\">const</span> data = <span class=\"hljs-title function_\">reactive</span>(&#123;&#125;)</span></span><br><span class=\"language-javascript\"><span class=\"language-xml\"></span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">script</span>&gt;</span></span><br></code></pre></td></tr></table></figure>\n\n<h1 id=\"vite-子应用\"><a href=\"#vite-子应用\" class=\"headerlink\" title=\"vite 子应用\"></a>vite 子应用</h1><blockquote>\n<p>按照正常方式搭建vite 子应用，main.ts &amp;&amp; serve 服务需要改造</p>\n</blockquote>\n<h2 id=\"关闭-disable-sandbox-模式-子应用的-main-ts-配置\"><a href=\"#关闭-disable-sandbox-模式-子应用的-main-ts-配置\" class=\"headerlink\" title=\"关闭 disable-sandbox 模式 子应用的 main.ts 配置\"></a>关闭 disable-sandbox 模式 子应用的 main.ts 配置</h2><h3 id=\"main-ts-入口文件文件\"><a href=\"#main-ts-入口文件文件\" class=\"headerlink\" title=\"main.ts 入口文件文件\"></a>main.ts 入口文件文件</h3><figure class=\"highlight ts\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs ts\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">handleMicroData</span> () &#123;<br>  <span class=\"hljs-comment\">// eventCenterForAppNameVite 是基座添加到window的数据通信对象</span><br>  <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-variable language_\">window</span>.<span class=\"hljs-property\">eventCenterForAppNameVite</span>) &#123;<br>    <span class=\"hljs-comment\">// 主动获取基座下发的数据</span><br>    <span class=\"hljs-keyword\">const</span> rootData = <span class=\"hljs-variable language_\">window</span>.<span class=\"hljs-property\">eventCenterForAppNameVite</span>.<span class=\"hljs-title function_\">getData</span>()<br>    <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(rootData)<br>  &#125;<br>&#125;<br><span class=\"hljs-keyword\">const</span> app = <span class=\"hljs-title function_\">createApp</span>(<span class=\"hljs-title class_\">App</span>)<br>app.<span class=\"hljs-title function_\">use</span>(router);<br>app.<span class=\"hljs-title function_\">mount</span>(<span class=\"hljs-string\">&#x27;#app&#x27;</span>)<br><br><span class=\"hljs-title function_\">handleMicroData</span>()<br><span class=\"hljs-comment\">// 监听卸载操作</span><br><span class=\"hljs-variable language_\">window</span>.<span class=\"hljs-title function_\">addEventListener</span>(<span class=\"hljs-string\">&#x27;unmount&#x27;</span>, <span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\"></span>) &#123;<br>  app.<span class=\"hljs-title function_\">unmount</span>()<br>  <span class=\"hljs-comment\">// 卸载所有数据监听函数</span><br>  <span class=\"hljs-variable language_\">window</span>.<span class=\"hljs-property\">eventCenterForAppNameVite</span>?.<span class=\"hljs-title function_\">clearDataListener</span>()<br>&#125;)<br><br></code></pre></td></tr></table></figure>\n<h3 id=\"vite-config-ts-配置\"><a href=\"#vite-config-ts-配置\" class=\"headerlink\" title=\"vite.config.ts 配置\"></a>vite.config.ts 配置</h3><ul>\n<li>server 需要支持 跨域请求</li>\n<li>打包时处理<ul>\n<li>指定域名设置</li>\n<li>通过动态basePath插件 vite-plugin-dynamic-base  类似webpack __webpack_public_path__</li>\n</ul>\n</li>\n</ul>\n<figure class=\"highlight ts\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs ts\"><span class=\"hljs-keyword\">import</span> &#123; fileURLToPath, <span class=\"hljs-variable constant_\">URL</span> &#125; <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">&#x27;node:url&#x27;</span><br><br><span class=\"hljs-keyword\">import</span> &#123; defineConfig &#125; <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">&#x27;vite&#x27;</span><br><span class=\"hljs-keyword\">import</span> vue <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">&#x27;@vitejs/plugin-vue&#x27;</span><br><span class=\"hljs-keyword\">import</span> vueJsx <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">&#x27;@vitejs/plugin-vue-jsx&#x27;</span><br><span class=\"hljs-keyword\">import</span> &#123; dynamicBase &#125; <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">&#x27;vite-plugin-dynamic-base&#x27;</span><br><span class=\"hljs-comment\">// https://vitejs.dev/config/</span><br><span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">default</span> <span class=\"hljs-title function_\">defineConfig</span>(&#123;<br>  <span class=\"hljs-attr\">base</span>: process.<span class=\"hljs-property\">env</span>.<span class=\"hljs-property\">NODE_ENV</span> === <span class=\"hljs-string\">&quot;production&quot;</span> ? <span class=\"hljs-string\">&quot;__dynamic_base__&quot;</span> : <span class=\"hljs-string\">&quot;/child/vite-vue/&quot;</span>,<br>  <span class=\"hljs-attr\">plugins</span>: [<br>    <span class=\"hljs-title function_\">vue</span>(),<br>    <span class=\"hljs-title function_\">vueJsx</span>(),<br>    <span class=\"hljs-comment\">//打包后 </span><br>    <span class=\"hljs-title function_\">dynamicBase</span>(&#123;<br>      <span class=\"hljs-attr\">publicPath</span>: <span class=\"hljs-string\">&#x27;window.__dynamic_base__&#x27;</span>,<br>      <span class=\"hljs-attr\">transformIndexHtml</span>:  <span class=\"hljs-literal\">true</span><br>    &#125;)<br>  ],<br>  <span class=\"hljs-attr\">server</span>: &#123;<br>    <span class=\"hljs-attr\">port</span>: <span class=\"hljs-number\">8004</span>,<br>    <span class=\"hljs-attr\">headers</span>: &#123;<br>      <span class=\"hljs-string\">&#x27;Access-Control-Allow-Origin&#x27;</span>: <span class=\"hljs-string\">&#x27;*&#x27;</span>,<br>    &#125;,<br>    <span class=\"hljs-attr\">cors</span>: <span class=\"hljs-literal\">true</span>,<br>  &#125;,<br>  <span class=\"hljs-attr\">resolve</span>: &#123;<br>    <span class=\"hljs-attr\">alias</span>: &#123;<br>      <span class=\"hljs-string\">&#x27;@&#x27;</span>: <span class=\"hljs-title function_\">fileURLToPath</span>(<span class=\"hljs-keyword\">new</span> <span class=\"hljs-title function_\">URL</span>(<span class=\"hljs-string\">&#x27;./src&#x27;</span>, <span class=\"hljs-keyword\">import</span>.<span class=\"hljs-property\">meta</span>.<span class=\"hljs-property\">url</span>))<br>    &#125;<br>  &#125;<br>&#125;)<br><br></code></pre></td></tr></table></figure>\n\n<h1 id=\"部署\"><a href=\"#部署\" class=\"headerlink\" title=\"部署\"></a>部署</h1><p><a href=\"https://zeroing.jd.com/micro-app/docs.html#/zh-cn/deploy\">参考官网配置</a></p>\n<h1 id=\"问题-解决方案\"><a href=\"#问题-解决方案\" class=\"headerlink\" title=\"问题&amp;&amp;解决方案\"></a>问题&amp;&amp;解决方案</h1><ol>\n<li><p>部署后无法加载vite 子应用，原因可能</p>\n<ul>\n<li>window.__dynamic_base__ 属性未初始化成功</li>\n<li>基座应用加载vite-vue 子应用时使用了预加载模式，</li>\n</ul>\n</li>\n<li><p>父子资源样式相互污染</p>\n<ul>\n<li>如果基座样式库使用 elment-plus 可以通过自定义命名空间规避污染</li>\n<li>开启沙盒模式进行样式隔离</li>\n</ul>\n</li>\n</ol>\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"搭建平台基座\"><a href=\"#搭建平台基座\" class=\"headerlink\" title=\"搭建平台基座\"></a>搭建平台基座</h1><blockquote>\n<p>基座与平台无关，技术栈 vite + vue3 + element-plus<br><a href=\"https://zeroing.jd.com/micro-app/docs.html#/\">micro-app v0.8.1</a><br><a href=\"https://micro-zoe.com/docs/1.x/#/zh-cn/start\">micro-app 1.0.0-beta 版本</a></p>\n</blockquote>\n<h2 id=\"通过vite-脚手架搭建项目\"><a href=\"#通过vite-脚手架搭建项目\" class=\"headerlink\" title=\"通过vite 脚手架搭建项目\"></a>通过vite 脚手架搭建项目</h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\"><span class=\"hljs-comment\"># npm 7+, extra double-dash is needed:</span><br>npm create vite@latest my-vue-app -- --template vue-ts<br><br></code></pre></td></tr></table></figure>\n<ul>\n<li><p>安装 micro-app </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">npm i @micro-zoe/micro-app --save<br></code></pre></td></tr></table></figure>\n</li>\n<li><p>入口文件添加 <strong>micro-app</strong></p>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs typescript\"> <span class=\"hljs-keyword\">import</span> microApp <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">&#x27;@micro-zoe/micro-app&#x27;</span>;<br> microApp.<span class=\"hljs-title function_\">start</span>(&#123;<br>    <span class=\"hljs-attr\">destroy</span>: <span class=\"hljs-literal\">true</span><br> &#125;)<br><br><span class=\"hljs-keyword\">const</span> app = <span class=\"hljs-title function_\">createApp</span>()<br>app.<span class=\"hljs-title function_\">mount</span>(<span class=\"hljs-string\">&#x27;#root&#x27;</span>)<br><br></code></pre></td></tr></table></figure></li>\n</ul>\n<h2 id=\"安装element-plus\"><a href=\"#安装element-plus\" class=\"headerlink\" title=\"安装element-plus\"></a>安装element-plus</h2><p>| 由于 micro-app 基座应用的样式类无法被隔离，建议修改elment-plus样式类的命名空间</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">npm i element-plus<br></code></pre></td></tr></table></figure>\n<p>修改 element-plus 命名空间<br>element plus 当前可以全局导入，如果需要按需导入修改命名空间 可参考官网</p>\n<p><strong>设置 ElConfigProvider</strong><br>使用 ElConfigProvider 包装您的根组件。</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs vue\">&lt;!-- App.vue --&gt;<br>&lt;template&gt;<br>  &lt;el-config-provider namespace=&quot;sk&quot;&gt;<br>    &lt;router-view&gt;&lt;/router-view&gt;<br>  &lt;/el-config-provider&gt;<br>&lt;/template&gt;<br></code></pre></td></tr></table></figure>\n<p><strong>设置 SCSS 和 CSS 变量</strong><br>创建 styles&#x2F;element&#x2F;index.scss：</p>\n<figure class=\"highlight scss\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs scss\"><span class=\"hljs-comment\">// styles/element/index.scss</span><br><span class=\"hljs-comment\">// we can add this to custom namespace, default is &#x27;el&#x27;</span><br><span class=\"hljs-keyword\">@forward</span> <span class=\"hljs-string\">&#x27;element-plus/theme-chalk/src/mixins/config.scss&#x27;</span> with (<br>  <span class=\"hljs-variable\">$namespace</span>: <span class=\"hljs-string\">&#x27;sk&#x27;</span><br>);<br><br><span class=\"hljs-keyword\">@use</span> <span class=\"hljs-string\">&quot;element-plus/theme-chalk/src/index.scss&quot;</span> as *;<br><span class=\"hljs-comment\">// ...</span><br><br></code></pre></td></tr></table></figure>\n<p>在 vite.config.ts 中导入 styles&#x2F;element&#x2F;index.scss：</p>\n<figure class=\"highlight ts\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs ts\"><span class=\"hljs-keyword\">import</span> &#123; defineConfig &#125; <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">&#x27;vite&#x27;</span><br><span class=\"hljs-comment\">// https://vitejs.dev/config/</span><br><span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">default</span> <span class=\"hljs-title function_\">defineConfig</span>(&#123;<br>  <span class=\"hljs-comment\">// ...</span><br>  <span class=\"hljs-attr\">css</span>: &#123;<br>    <span class=\"hljs-attr\">preprocessorOptions</span>: &#123;<br>      <span class=\"hljs-attr\">scss</span>: &#123;<br>        <span class=\"hljs-attr\">additionalData</span>: <span class=\"hljs-string\">`@use &quot;~/styles/element/index.scss&quot; as *;`</span>,<br>      &#125;,<br>    &#125;,<br>  &#125;,<br>  <span class=\"hljs-comment\">// ...</span><br>&#125;)<br></code></pre></td></tr></table></figure>\n\n<h2 id=\"子应用-vite-挂载\"><a href=\"#子应用-vite-挂载\" class=\"headerlink\" title=\"子应用 vite 挂载\"></a>子应用 vite 挂载</h2><ul>\n<li>挂载子应用路由<figure class=\"highlight ts\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs ts\"><span class=\"hljs-keyword\">const</span> router = <span class=\"hljs-title function_\">createRouter</span>(&#123;<br>  <span class=\"hljs-attr\">history</span>: <span class=\"hljs-title function_\">createWebHistory</span>(<span class=\"hljs-keyword\">import</span>.<span class=\"hljs-property\">meta</span>.<span class=\"hljs-property\">env</span>.<span class=\"hljs-property\">BASE_URL</span>),<br>  <span class=\"hljs-attr\">routes</span>: [<br>    ...,<br>    &#123;<br>      <span class=\"hljs-attr\">path</span>: <span class=\"hljs-string\">&#x27;/mse:*&#x27;</span>,<br>      <span class=\"hljs-attr\">name</span>: <span class=\"hljs-string\">&#x27;mse&#x27;</span>,<br>      <span class=\"hljs-attr\">component</span>: <span class=\"hljs-function\">() =&gt;</span> <span class=\"hljs-keyword\">import</span>(<span class=\"hljs-string\">&#x27;@/views/mse/index.vue&#x27;</span>),<br>    &#125;,<br>  ],<br>&#125;);<br><br></code></pre></td></tr></table></figure></li>\n<li>vite子应用组件挂载<br>子应用micro-app 中需要区分 URL与baseroute 关系具体可<a href=\"https://zeroing.jd.com/micro-app/docs.html#/zh-cn/route\">参考官网</a><ul>\n<li>URL 为获取index.html静态资源的加载路由</li>\n<li>baseroute 为下发子应用的区分路由</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"关闭-disable-sandbox\"><a href=\"#关闭-disable-sandbox\" class=\"headerlink\" title=\"关闭 disable-sandbox\"></a>关闭 disable-sandbox</h3><figure class=\"highlight ts\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs ts\">&lt;template&gt;<br>  <span class=\"language-xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;mse-iframe-container&quot;</span>&gt;</span></span><br><span class=\"language-xml\">  // 加载vite 应用需要关闭沙箱</span><br><span class=\"language-xml\">    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">micro-app</span> <span class=\"hljs-attr\">name</span>=<span class=\"hljs-string\">&quot;mse&quot;</span> <span class=\"hljs-attr\">url</span>=<span class=\"hljs-string\">&quot;http://localhost:8004&quot;</span> <span class=\"hljs-attr\">:data</span>=<span class=\"hljs-string\">&quot;&#123;&#125;&quot;</span> <span class=\"hljs-attr\">baseroute</span>=<span class=\"hljs-string\">&quot;/child/vite-vue&quot;</span> <span class=\"hljs-attr\">inline</span> <span class=\"hljs-attr\">disablesandbox</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">micro-app</span>&gt;</span></span><br><span class=\"language-xml\">  <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span></span><br>&lt;/template&gt;<br><span class=\"language-xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">script</span> <span class=\"hljs-attr\">setup</span> <span class=\"hljs-attr\">lang</span>=<span class=\"hljs-string\">&quot;ts&quot;</span>&gt;</span><span class=\"language-javascript\"></span></span><br><span class=\"language-javascript\"><span class=\"language-xml\"><span class=\"hljs-keyword\">import</span> &#123; <span class=\"hljs-title class_\">EventCenterForMicroApp</span> &#125; <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">&#x27;@micro-zoe/micro-app&#x27;</span></span></span><br><span class=\"language-javascript\"><span class=\"language-xml\"><span class=\"hljs-keyword\">import</span> config, &#123; getAppUrl &#125; <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">&#x27;@/micro-app/config.ts&#x27;</span></span></span><br><span class=\"language-javascript\"><span class=\"language-xml\"><span class=\"hljs-keyword\">import</span> &#123; ref &#125; <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">&#x27;vue&#x27;</span>;</span></span><br><span class=\"language-javascript\"><span class=\"language-xml\"><span class=\"hljs-comment\">// @ts-ignore 因为vite子应用关闭了沙箱，我们需要为子应用mse创建EventCenterForMicroApp对象来实现数据通信</span></span></span><br><span class=\"language-javascript\"><span class=\"language-xml\"><span class=\"hljs-variable language_\">window</span>.<span class=\"hljs-property\">eventCenterForAppNameVite</span> = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">EventCenterForMicroApp</span>(<span class=\"hljs-string\">&#x27;mse&#x27;</span>)</span></span><br><span class=\"language-javascript\"><span class=\"language-xml\"></span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">script</span>&gt;</span></span><br><span class=\"language-xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">style</span> <span class=\"hljs-attr\">lang</span>=<span class=\"hljs-string\">&quot;less&quot;</span> <span class=\"hljs-attr\">scoped</span>&gt;</span><span class=\"language-css\"></span></span><br><span class=\"language-css\"><span class=\"language-xml\"><span class=\"hljs-selector-class\">.mse-iframe-container</span> &#123;</span></span><br><span class=\"language-css\"><span class=\"language-xml\">  <span class=\"hljs-attribute\">height</span>: <span class=\"hljs-number\">100%</span>;</span></span><br><span class=\"language-css\"><span class=\"language-xml\">&#125;</span></span><br><span class=\"language-css\"><span class=\"language-xml\"></span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">style</span>&gt;</span></span><br></code></pre></td></tr></table></figure>\n\n<h3 id=\"Iframe-沙箱模式加载-BETA-1-0-公测支持\"><a href=\"#Iframe-沙箱模式加载-BETA-1-0-公测支持\" class=\"headerlink\" title=\"Iframe 沙箱模式加载(BETA 1.0 公测支持)\"></a>Iframe 沙箱模式加载(BETA 1.0 公测支持)</h3><blockquote>\n<p>推荐使用</p>\n</blockquote>\n<figure class=\"highlight ts\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs ts\">&lt;template&gt;<br>  <span class=\"language-xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span>&gt;</span></span><br><span class=\"language-xml\">    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">micro-app</span> <span class=\"hljs-attr\">:name</span>=<span class=\"hljs-string\">&quot;name&quot;</span> <span class=\"hljs-attr\">:url</span>=<span class=\"hljs-string\">&quot;url&quot;</span> <span class=\"hljs-attr\">:data</span>=<span class=\"hljs-string\">&quot;data&quot;</span> <span class=\"hljs-attr\">iframe</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">micro-app</span>&gt;</span></span><br><span class=\"language-xml\">  <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span></span><br>&lt;/template&gt;<br><span class=\"language-xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">script</span> <span class=\"hljs-attr\">setup</span> <span class=\"hljs-attr\">lang</span>=<span class=\"hljs-string\">&quot;ts&quot;</span>&gt;</span><span class=\"language-javascript\"></span></span><br><span class=\"language-javascript\"><span class=\"language-xml\"><span class=\"hljs-keyword\">import</span> config, &#123; getAppUrl &#125; <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">&#x27;@/micro-app/config.ts&#x27;</span></span></span><br><span class=\"language-javascript\"><span class=\"language-xml\"><span class=\"hljs-keyword\">import</span> &#123; ref &#125; <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">&#x27;vue&#x27;</span>;</span></span><br><span class=\"language-javascript\"><span class=\"language-xml\"><span class=\"hljs-keyword\">import</span> &#123; useMicroData &#125; <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">&#x27;@/micro-app/micro-data-hooks&#x27;</span>;</span></span><br><span class=\"language-javascript\"><span class=\"language-xml\"><span class=\"hljs-keyword\">const</span> name = config.<span class=\"hljs-property\">mse</span>.<span class=\"hljs-property\">appName</span></span></span><br><span class=\"language-javascript\"><span class=\"language-xml\"><span class=\"hljs-keyword\">const</span> url = <span class=\"hljs-title function_\">ref</span>(<span class=\"hljs-string\">&#x27;http://localhost:9001&#x27;</span>)</span></span><br><span class=\"language-javascript\"><span class=\"language-xml\"><span class=\"hljs-keyword\">const</span> data = <span class=\"hljs-title function_\">reactive</span>(&#123;&#125;)</span></span><br><span class=\"language-javascript\"><span class=\"language-xml\"></span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">script</span>&gt;</span></span><br></code></pre></td></tr></table></figure>\n\n<h1 id=\"vite-子应用\"><a href=\"#vite-子应用\" class=\"headerlink\" title=\"vite 子应用\"></a>vite 子应用</h1><blockquote>\n<p>按照正常方式搭建vite 子应用，main.ts &amp;&amp; serve 服务需要改造</p>\n</blockquote>\n<h2 id=\"关闭-disable-sandbox-模式-子应用的-main-ts-配置\"><a href=\"#关闭-disable-sandbox-模式-子应用的-main-ts-配置\" class=\"headerlink\" title=\"关闭 disable-sandbox 模式 子应用的 main.ts 配置\"></a>关闭 disable-sandbox 模式 子应用的 main.ts 配置</h2><h3 id=\"main-ts-入口文件文件\"><a href=\"#main-ts-入口文件文件\" class=\"headerlink\" title=\"main.ts 入口文件文件\"></a>main.ts 入口文件文件</h3><figure class=\"highlight ts\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs ts\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">handleMicroData</span> () &#123;<br>  <span class=\"hljs-comment\">// eventCenterForAppNameVite 是基座添加到window的数据通信对象</span><br>  <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-variable language_\">window</span>.<span class=\"hljs-property\">eventCenterForAppNameVite</span>) &#123;<br>    <span class=\"hljs-comment\">// 主动获取基座下发的数据</span><br>    <span class=\"hljs-keyword\">const</span> rootData = <span class=\"hljs-variable language_\">window</span>.<span class=\"hljs-property\">eventCenterForAppNameVite</span>.<span class=\"hljs-title function_\">getData</span>()<br>    <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(rootData)<br>  &#125;<br>&#125;<br><span class=\"hljs-keyword\">const</span> app = <span class=\"hljs-title function_\">createApp</span>(<span class=\"hljs-title class_\">App</span>)<br>app.<span class=\"hljs-title function_\">use</span>(router);<br>app.<span class=\"hljs-title function_\">mount</span>(<span class=\"hljs-string\">&#x27;#app&#x27;</span>)<br><br><span class=\"hljs-title function_\">handleMicroData</span>()<br><span class=\"hljs-comment\">// 监听卸载操作</span><br><span class=\"hljs-variable language_\">window</span>.<span class=\"hljs-title function_\">addEventListener</span>(<span class=\"hljs-string\">&#x27;unmount&#x27;</span>, <span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\"></span>) &#123;<br>  app.<span class=\"hljs-title function_\">unmount</span>()<br>  <span class=\"hljs-comment\">// 卸载所有数据监听函数</span><br>  <span class=\"hljs-variable language_\">window</span>.<span class=\"hljs-property\">eventCenterForAppNameVite</span>?.<span class=\"hljs-title function_\">clearDataListener</span>()<br>&#125;)<br><br></code></pre></td></tr></table></figure>\n<h3 id=\"vite-config-ts-配置\"><a href=\"#vite-config-ts-配置\" class=\"headerlink\" title=\"vite.config.ts 配置\"></a>vite.config.ts 配置</h3><ul>\n<li>server 需要支持 跨域请求</li>\n<li>打包时处理<ul>\n<li>指定域名设置</li>\n<li>通过动态basePath插件 vite-plugin-dynamic-base  类似webpack __webpack_public_path__</li>\n</ul>\n</li>\n</ul>\n<figure class=\"highlight ts\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs ts\"><span class=\"hljs-keyword\">import</span> &#123; fileURLToPath, <span class=\"hljs-variable constant_\">URL</span> &#125; <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">&#x27;node:url&#x27;</span><br><br><span class=\"hljs-keyword\">import</span> &#123; defineConfig &#125; <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">&#x27;vite&#x27;</span><br><span class=\"hljs-keyword\">import</span> vue <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">&#x27;@vitejs/plugin-vue&#x27;</span><br><span class=\"hljs-keyword\">import</span> vueJsx <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">&#x27;@vitejs/plugin-vue-jsx&#x27;</span><br><span class=\"hljs-keyword\">import</span> &#123; dynamicBase &#125; <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">&#x27;vite-plugin-dynamic-base&#x27;</span><br><span class=\"hljs-comment\">// https://vitejs.dev/config/</span><br><span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">default</span> <span class=\"hljs-title function_\">defineConfig</span>(&#123;<br>  <span class=\"hljs-attr\">base</span>: process.<span class=\"hljs-property\">env</span>.<span class=\"hljs-property\">NODE_ENV</span> === <span class=\"hljs-string\">&quot;production&quot;</span> ? <span class=\"hljs-string\">&quot;__dynamic_base__&quot;</span> : <span class=\"hljs-string\">&quot;/child/vite-vue/&quot;</span>,<br>  <span class=\"hljs-attr\">plugins</span>: [<br>    <span class=\"hljs-title function_\">vue</span>(),<br>    <span class=\"hljs-title function_\">vueJsx</span>(),<br>    <span class=\"hljs-comment\">//打包后 </span><br>    <span class=\"hljs-title function_\">dynamicBase</span>(&#123;<br>      <span class=\"hljs-attr\">publicPath</span>: <span class=\"hljs-string\">&#x27;window.__dynamic_base__&#x27;</span>,<br>      <span class=\"hljs-attr\">transformIndexHtml</span>:  <span class=\"hljs-literal\">true</span><br>    &#125;)<br>  ],<br>  <span class=\"hljs-attr\">server</span>: &#123;<br>    <span class=\"hljs-attr\">port</span>: <span class=\"hljs-number\">8004</span>,<br>    <span class=\"hljs-attr\">headers</span>: &#123;<br>      <span class=\"hljs-string\">&#x27;Access-Control-Allow-Origin&#x27;</span>: <span class=\"hljs-string\">&#x27;*&#x27;</span>,<br>    &#125;,<br>    <span class=\"hljs-attr\">cors</span>: <span class=\"hljs-literal\">true</span>,<br>  &#125;,<br>  <span class=\"hljs-attr\">resolve</span>: &#123;<br>    <span class=\"hljs-attr\">alias</span>: &#123;<br>      <span class=\"hljs-string\">&#x27;@&#x27;</span>: <span class=\"hljs-title function_\">fileURLToPath</span>(<span class=\"hljs-keyword\">new</span> <span class=\"hljs-title function_\">URL</span>(<span class=\"hljs-string\">&#x27;./src&#x27;</span>, <span class=\"hljs-keyword\">import</span>.<span class=\"hljs-property\">meta</span>.<span class=\"hljs-property\">url</span>))<br>    &#125;<br>  &#125;<br>&#125;)<br><br></code></pre></td></tr></table></figure>\n\n<h1 id=\"部署\"><a href=\"#部署\" class=\"headerlink\" title=\"部署\"></a>部署</h1><p><a href=\"https://zeroing.jd.com/micro-app/docs.html#/zh-cn/deploy\">参考官网配置</a></p>\n<h1 id=\"问题-解决方案\"><a href=\"#问题-解决方案\" class=\"headerlink\" title=\"问题&amp;&amp;解决方案\"></a>问题&amp;&amp;解决方案</h1><ol>\n<li><p>部署后无法加载vite 子应用，原因可能</p>\n<ul>\n<li>window.__dynamic_base__ 属性未初始化成功</li>\n<li>基座应用加载vite-vue 子应用时使用了预加载模式，</li>\n</ul>\n</li>\n<li><p>父子资源样式相互污染</p>\n<ul>\n<li>如果基座样式库使用 elment-plus 可以通过自定义命名空间规避污染</li>\n<li>开启沙盒模式进行样式隔离</li>\n</ul>\n</li>\n</ol>\n"},{"title":"svg 动画","date":"2023-09-10T02:38:39.000Z","_content":"\n# svg 动画\n[动画参考资料链接链接](https://css-tricks.com/guide-svg-animations-smil/) https://css-tricks.com/guide-svg-animations-smil/\n\n## SVG dasharray \nstroke-dasharray 属性可以设置线段绘制时的间隔\nstroke-dasharray 数值型值 可以配置2个，第二个值缺省\n- stroke-dasharray=\"4\" 代表dash 值和offset间距保持一直\n- stroke-dasharray=\"4 5\"  dash宽度为4，每一块间距为5\n\n```html\n<svg version=\"1.1\"\n     baseProfile=\"full\"\n     width=\"100%\" height=\"100%\"\n     xmlns=\"http://www.w3.org/2000/svg\">\n    <path d=\"M0, 200, L200, 200, L400, 200\" stroke=\"green\" stroke-width=\"6\"></path>\n    <path d=\"M0, 250, L200, 250, L400, 250\" stroke=\"green\" stroke-dasharray=\"2\" stroke-width=\"6\"></path>\n</svg>\n\n```\n\n## [stroke-dashoffset](https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/stroke-dashoffset)\nstroke-dashoffset 指定了 dash 模式到路径开始的距离\n\n```html\n<svg version=\"1.1\"\n     baseProfile=\"full\"\n     width=\"100%\" height=\"100%\"\n     xmlns=\"http://www.w3.org/2000/svg\">\n    <path d=\"M0, 200, L200, 200, L400, 200\" stroke=\"green\" stroke-width=\"6\"></path>\n    <path d=\"M0, 250, L200, 250, L400, 250\" stroke=\"green\" stroke-dasharray=\"2\" stroke-width=\"6\"></path>\n    <path d=\"M0, 250, L200, 250, L400, 250\" stroke=\"green\" stroke-dasharray=\"2\" stroke-dashoffset=\"2\" stroke-width=\"6\"></path>\n</svg>\n\n## 结合dasharray 与 stroke-dashoffset 让路径动起来\n```html\n<svg version=\"1.1\"\n     baseProfile=\"full\"\n     width=\"100%\" height=\"100%\"\n     xmlns=\"http://www.w3.org/2000/svg\">\n    <path d=\"M0, 200, L200, 200, L400, 200\" stroke=\"green\" stroke-width=\"6\"></path>\n    <path d=\"M0, 250, L200, 250, L400, 250\" stroke=\"green\" stroke-dasharray=\"2\" stroke-width=\"6\"></path>\n    \n    <path d=\"M0, 250, L200, 250, L400, 250\" stroke=\"green\" stroke-dasharray=\"2\" stroke-dashoffset=\"2\" stroke-width=\"6\">\n      <animate attributeName=\"stroke-dashoffset\" from=\"0\" to=\"-20\" dur=\"10\" fill=\"freeze\" repeatCount=\"indefinite\" easing=\"linear\"></animate>\n    </path>\n</svg>\n\n```\n![](/img/svg/svg-1.gif)\n\n## 模拟管道水流动动画\n该动画需要通过 SVGGeometryElement的 getTotalLength 获取全部路径，通过动画设置stroke-dashoffset偏移\n```vue\n<template>\n   <svg version=\"1.1\"\n     baseProfile=\"full\"\n     width=\"100%\" height=\"100%\"\n     xmlns=\"http://www.w3.org/2000/svg\">\n     <path\n        ref=\"pathEl2\"\n        fill=\"none\"\n        :stroke-dasharray=\"dashArray\"\n        stroke=\"red\"\n        stroke-width=\"6\"\n            d=\"M 10,30\n            A 20,20 0,0,1 50,30\n            A 20,20 0,0,1 90,30\n            Q 90,60 50,90\n            Q 10,60 10,30 z\" >\n            <!-- <animate\n                attributeName=\"dash\"\n                values=\"0;5;0\"\n                dur=\"10s\"\n                repeatCount=\"indefinite\" /> -->\n            </path>\n\n     <path\n        ref=\"pathEl\"\n        fill=\"none\"\n        :stroke-dasharray=\"dashArray\"\n        :stroke-dashoffset=\"strokeDashoffset\"\n        stroke-width=\"6\"\n        stroke=\"green\"\n            d=\"M 10,30\n            A 20,20 0,0,1 50,30\n            A 20,20 0,0,1 90,30\n            Q 90,60 50,90\n            Q 10,60 10,30 z\" >\n            <animate\n                attributeName=\"stroke-dashoffset\"\n                from=\"275\"\n                to=\"0\"\n                dur=\"4s\"\n                repeatCount=\"indefinite\" />\n            </path> \n</svg>\n</template>\n\n<script setup lang=\"ts\">\nimport { onMounted, ref } from 'vue';\n\nconst pathEl = ref<SVGGeometryElement>()\n\nconst dashArray = ref(275)\nconst strokeDashoffset = ref(-275)\n\nonMounted(() => {\n    const totalLength = pathEl.value?.getTotalLength()\n    console.log(totalLength)\n\n})\n\n</script>\n\n<style scoped>\n\n</style>\n\n```\n运行效果预览\n![](/img/svg/svg-path-wather.gif)\n\n其他\nTODO","source":"_posts/svg-animate.md","raw":"---\ntitle: svg 动画\ndate: 2023-09-10 10:38:39\ntags: svg\n---\n\n# svg 动画\n[动画参考资料链接链接](https://css-tricks.com/guide-svg-animations-smil/) https://css-tricks.com/guide-svg-animations-smil/\n\n## SVG dasharray \nstroke-dasharray 属性可以设置线段绘制时的间隔\nstroke-dasharray 数值型值 可以配置2个，第二个值缺省\n- stroke-dasharray=\"4\" 代表dash 值和offset间距保持一直\n- stroke-dasharray=\"4 5\"  dash宽度为4，每一块间距为5\n\n```html\n<svg version=\"1.1\"\n     baseProfile=\"full\"\n     width=\"100%\" height=\"100%\"\n     xmlns=\"http://www.w3.org/2000/svg\">\n    <path d=\"M0, 200, L200, 200, L400, 200\" stroke=\"green\" stroke-width=\"6\"></path>\n    <path d=\"M0, 250, L200, 250, L400, 250\" stroke=\"green\" stroke-dasharray=\"2\" stroke-width=\"6\"></path>\n</svg>\n\n```\n\n## [stroke-dashoffset](https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/stroke-dashoffset)\nstroke-dashoffset 指定了 dash 模式到路径开始的距离\n\n```html\n<svg version=\"1.1\"\n     baseProfile=\"full\"\n     width=\"100%\" height=\"100%\"\n     xmlns=\"http://www.w3.org/2000/svg\">\n    <path d=\"M0, 200, L200, 200, L400, 200\" stroke=\"green\" stroke-width=\"6\"></path>\n    <path d=\"M0, 250, L200, 250, L400, 250\" stroke=\"green\" stroke-dasharray=\"2\" stroke-width=\"6\"></path>\n    <path d=\"M0, 250, L200, 250, L400, 250\" stroke=\"green\" stroke-dasharray=\"2\" stroke-dashoffset=\"2\" stroke-width=\"6\"></path>\n</svg>\n\n## 结合dasharray 与 stroke-dashoffset 让路径动起来\n```html\n<svg version=\"1.1\"\n     baseProfile=\"full\"\n     width=\"100%\" height=\"100%\"\n     xmlns=\"http://www.w3.org/2000/svg\">\n    <path d=\"M0, 200, L200, 200, L400, 200\" stroke=\"green\" stroke-width=\"6\"></path>\n    <path d=\"M0, 250, L200, 250, L400, 250\" stroke=\"green\" stroke-dasharray=\"2\" stroke-width=\"6\"></path>\n    \n    <path d=\"M0, 250, L200, 250, L400, 250\" stroke=\"green\" stroke-dasharray=\"2\" stroke-dashoffset=\"2\" stroke-width=\"6\">\n      <animate attributeName=\"stroke-dashoffset\" from=\"0\" to=\"-20\" dur=\"10\" fill=\"freeze\" repeatCount=\"indefinite\" easing=\"linear\"></animate>\n    </path>\n</svg>\n\n```\n![](/img/svg/svg-1.gif)\n\n## 模拟管道水流动动画\n该动画需要通过 SVGGeometryElement的 getTotalLength 获取全部路径，通过动画设置stroke-dashoffset偏移\n```vue\n<template>\n   <svg version=\"1.1\"\n     baseProfile=\"full\"\n     width=\"100%\" height=\"100%\"\n     xmlns=\"http://www.w3.org/2000/svg\">\n     <path\n        ref=\"pathEl2\"\n        fill=\"none\"\n        :stroke-dasharray=\"dashArray\"\n        stroke=\"red\"\n        stroke-width=\"6\"\n            d=\"M 10,30\n            A 20,20 0,0,1 50,30\n            A 20,20 0,0,1 90,30\n            Q 90,60 50,90\n            Q 10,60 10,30 z\" >\n            <!-- <animate\n                attributeName=\"dash\"\n                values=\"0;5;0\"\n                dur=\"10s\"\n                repeatCount=\"indefinite\" /> -->\n            </path>\n\n     <path\n        ref=\"pathEl\"\n        fill=\"none\"\n        :stroke-dasharray=\"dashArray\"\n        :stroke-dashoffset=\"strokeDashoffset\"\n        stroke-width=\"6\"\n        stroke=\"green\"\n            d=\"M 10,30\n            A 20,20 0,0,1 50,30\n            A 20,20 0,0,1 90,30\n            Q 90,60 50,90\n            Q 10,60 10,30 z\" >\n            <animate\n                attributeName=\"stroke-dashoffset\"\n                from=\"275\"\n                to=\"0\"\n                dur=\"4s\"\n                repeatCount=\"indefinite\" />\n            </path> \n</svg>\n</template>\n\n<script setup lang=\"ts\">\nimport { onMounted, ref } from 'vue';\n\nconst pathEl = ref<SVGGeometryElement>()\n\nconst dashArray = ref(275)\nconst strokeDashoffset = ref(-275)\n\nonMounted(() => {\n    const totalLength = pathEl.value?.getTotalLength()\n    console.log(totalLength)\n\n})\n\n</script>\n\n<style scoped>\n\n</style>\n\n```\n运行效果预览\n![](/img/svg/svg-path-wather.gif)\n\n其他\nTODO","slug":"svg-animate","published":1,"updated":"2023-09-11T03:38:07.240Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clmehafez000464tu0arwb5nv","content":"<h1 id=\"svg-动画\"><a href=\"#svg-动画\" class=\"headerlink\" title=\"svg 动画\"></a>svg 动画</h1><p><a href=\"https://css-tricks.com/guide-svg-animations-smil/\">动画参考资料链接链接</a> <a href=\"https://css-tricks.com/guide-svg-animations-smil/\">https://css-tricks.com/guide-svg-animations-smil/</a></p>\n<h2 id=\"SVG-dasharray\"><a href=\"#SVG-dasharray\" class=\"headerlink\" title=\"SVG dasharray\"></a>SVG dasharray</h2><p>stroke-dasharray 属性可以设置线段绘制时的间隔<br>stroke-dasharray 数值型值 可以配置2个，第二个值缺省</p>\n<ul>\n<li>stroke-dasharray&#x3D;”4” 代表dash 值和offset间距保持一直</li>\n<li>stroke-dasharray&#x3D;”4 5”  dash宽度为4，每一块间距为5</li>\n</ul>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs html\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">svg</span> <span class=\"hljs-attr\">version</span>=<span class=\"hljs-string\">&quot;1.1&quot;</span></span><br><span class=\"hljs-tag\">     <span class=\"hljs-attr\">baseProfile</span>=<span class=\"hljs-string\">&quot;full&quot;</span></span><br><span class=\"hljs-tag\">     <span class=\"hljs-attr\">width</span>=<span class=\"hljs-string\">&quot;100%&quot;</span> <span class=\"hljs-attr\">height</span>=<span class=\"hljs-string\">&quot;100%&quot;</span></span><br><span class=\"hljs-tag\">     <span class=\"hljs-attr\">xmlns</span>=<span class=\"hljs-string\">&quot;http://www.w3.org/2000/svg&quot;</span>&gt;</span><br>    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">path</span> <span class=\"hljs-attr\">d</span>=<span class=\"hljs-string\">&quot;M0, 200, L200, 200, L400, 200&quot;</span> <span class=\"hljs-attr\">stroke</span>=<span class=\"hljs-string\">&quot;green&quot;</span> <span class=\"hljs-attr\">stroke-width</span>=<span class=\"hljs-string\">&quot;6&quot;</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">path</span>&gt;</span><br>    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">path</span> <span class=\"hljs-attr\">d</span>=<span class=\"hljs-string\">&quot;M0, 250, L200, 250, L400, 250&quot;</span> <span class=\"hljs-attr\">stroke</span>=<span class=\"hljs-string\">&quot;green&quot;</span> <span class=\"hljs-attr\">stroke-dasharray</span>=<span class=\"hljs-string\">&quot;2&quot;</span> <span class=\"hljs-attr\">stroke-width</span>=<span class=\"hljs-string\">&quot;6&quot;</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">path</span>&gt;</span><br><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">svg</span>&gt;</span><br><br></code></pre></td></tr></table></figure>\n\n<h2 id=\"stroke-dashoffset\"><a href=\"#stroke-dashoffset\" class=\"headerlink\" title=\"stroke-dashoffset\"></a><a href=\"https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/stroke-dashoffset\">stroke-dashoffset</a></h2><p>stroke-dashoffset 指定了 dash 模式到路径开始的距离</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs html\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">svg</span> <span class=\"hljs-attr\">version</span>=<span class=\"hljs-string\">&quot;1.1&quot;</span></span><br><span class=\"hljs-tag\">     <span class=\"hljs-attr\">baseProfile</span>=<span class=\"hljs-string\">&quot;full&quot;</span></span><br><span class=\"hljs-tag\">     <span class=\"hljs-attr\">width</span>=<span class=\"hljs-string\">&quot;100%&quot;</span> <span class=\"hljs-attr\">height</span>=<span class=\"hljs-string\">&quot;100%&quot;</span></span><br><span class=\"hljs-tag\">     <span class=\"hljs-attr\">xmlns</span>=<span class=\"hljs-string\">&quot;http://www.w3.org/2000/svg&quot;</span>&gt;</span><br>    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">path</span> <span class=\"hljs-attr\">d</span>=<span class=\"hljs-string\">&quot;M0, 200, L200, 200, L400, 200&quot;</span> <span class=\"hljs-attr\">stroke</span>=<span class=\"hljs-string\">&quot;green&quot;</span> <span class=\"hljs-attr\">stroke-width</span>=<span class=\"hljs-string\">&quot;6&quot;</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">path</span>&gt;</span><br>    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">path</span> <span class=\"hljs-attr\">d</span>=<span class=\"hljs-string\">&quot;M0, 250, L200, 250, L400, 250&quot;</span> <span class=\"hljs-attr\">stroke</span>=<span class=\"hljs-string\">&quot;green&quot;</span> <span class=\"hljs-attr\">stroke-dasharray</span>=<span class=\"hljs-string\">&quot;2&quot;</span> <span class=\"hljs-attr\">stroke-width</span>=<span class=\"hljs-string\">&quot;6&quot;</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">path</span>&gt;</span><br>    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">path</span> <span class=\"hljs-attr\">d</span>=<span class=\"hljs-string\">&quot;M0, 250, L200, 250, L400, 250&quot;</span> <span class=\"hljs-attr\">stroke</span>=<span class=\"hljs-string\">&quot;green&quot;</span> <span class=\"hljs-attr\">stroke-dasharray</span>=<span class=\"hljs-string\">&quot;2&quot;</span> <span class=\"hljs-attr\">stroke-dashoffset</span>=<span class=\"hljs-string\">&quot;2&quot;</span> <span class=\"hljs-attr\">stroke-width</span>=<span class=\"hljs-string\">&quot;6&quot;</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">path</span>&gt;</span><br><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">svg</span>&gt;</span><br><br>## 结合dasharray 与 stroke-dashoffset 让路径动起来<br>```html<br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">svg</span> <span class=\"hljs-attr\">version</span>=<span class=\"hljs-string\">&quot;1.1&quot;</span></span><br><span class=\"hljs-tag\">     <span class=\"hljs-attr\">baseProfile</span>=<span class=\"hljs-string\">&quot;full&quot;</span></span><br><span class=\"hljs-tag\">     <span class=\"hljs-attr\">width</span>=<span class=\"hljs-string\">&quot;100%&quot;</span> <span class=\"hljs-attr\">height</span>=<span class=\"hljs-string\">&quot;100%&quot;</span></span><br><span class=\"hljs-tag\">     <span class=\"hljs-attr\">xmlns</span>=<span class=\"hljs-string\">&quot;http://www.w3.org/2000/svg&quot;</span>&gt;</span><br>    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">path</span> <span class=\"hljs-attr\">d</span>=<span class=\"hljs-string\">&quot;M0, 200, L200, 200, L400, 200&quot;</span> <span class=\"hljs-attr\">stroke</span>=<span class=\"hljs-string\">&quot;green&quot;</span> <span class=\"hljs-attr\">stroke-width</span>=<span class=\"hljs-string\">&quot;6&quot;</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">path</span>&gt;</span><br>    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">path</span> <span class=\"hljs-attr\">d</span>=<span class=\"hljs-string\">&quot;M0, 250, L200, 250, L400, 250&quot;</span> <span class=\"hljs-attr\">stroke</span>=<span class=\"hljs-string\">&quot;green&quot;</span> <span class=\"hljs-attr\">stroke-dasharray</span>=<span class=\"hljs-string\">&quot;2&quot;</span> <span class=\"hljs-attr\">stroke-width</span>=<span class=\"hljs-string\">&quot;6&quot;</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">path</span>&gt;</span><br>    <br>    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">path</span> <span class=\"hljs-attr\">d</span>=<span class=\"hljs-string\">&quot;M0, 250, L200, 250, L400, 250&quot;</span> <span class=\"hljs-attr\">stroke</span>=<span class=\"hljs-string\">&quot;green&quot;</span> <span class=\"hljs-attr\">stroke-dasharray</span>=<span class=\"hljs-string\">&quot;2&quot;</span> <span class=\"hljs-attr\">stroke-dashoffset</span>=<span class=\"hljs-string\">&quot;2&quot;</span> <span class=\"hljs-attr\">stroke-width</span>=<span class=\"hljs-string\">&quot;6&quot;</span>&gt;</span><br>      <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">animate</span> <span class=\"hljs-attr\">attributeName</span>=<span class=\"hljs-string\">&quot;stroke-dashoffset&quot;</span> <span class=\"hljs-attr\">from</span>=<span class=\"hljs-string\">&quot;0&quot;</span> <span class=\"hljs-attr\">to</span>=<span class=\"hljs-string\">&quot;-20&quot;</span> <span class=\"hljs-attr\">dur</span>=<span class=\"hljs-string\">&quot;10&quot;</span> <span class=\"hljs-attr\">fill</span>=<span class=\"hljs-string\">&quot;freeze&quot;</span> <span class=\"hljs-attr\">repeatCount</span>=<span class=\"hljs-string\">&quot;indefinite&quot;</span> <span class=\"hljs-attr\">easing</span>=<span class=\"hljs-string\">&quot;linear&quot;</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">animate</span>&gt;</span><br>    <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">path</span>&gt;</span><br><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">svg</span>&gt;</span><br><br></code></pre></td></tr></table></figure>\n<p><img src=\"/img/svg/svg-1.gif\"></p>\n<h2 id=\"模拟管道水流动动画\"><a href=\"#模拟管道水流动动画\" class=\"headerlink\" title=\"模拟管道水流动动画\"></a>模拟管道水流动动画</h2><p>该动画需要通过 SVGGeometryElement的 getTotalLength 获取全部路径，通过动画设置stroke-dashoffset偏移</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs vue\">&lt;template&gt;<br>   &lt;svg version=&quot;1.1&quot;<br>     baseProfile=&quot;full&quot;<br>     width=&quot;100%&quot; height=&quot;100%&quot;<br>     xmlns=&quot;http://www.w3.org/2000/svg&quot;&gt;<br>     &lt;path<br>        ref=&quot;pathEl2&quot;<br>        fill=&quot;none&quot;<br>        :stroke-dasharray=&quot;dashArray&quot;<br>        stroke=&quot;red&quot;<br>        stroke-width=&quot;6&quot;<br>            d=&quot;M 10,30<br>            A 20,20 0,0,1 50,30<br>            A 20,20 0,0,1 90,30<br>            Q 90,60 50,90<br>            Q 10,60 10,30 z&quot; &gt;<br>            &lt;!-- &lt;animate<br>                attributeName=&quot;dash&quot;<br>                values=&quot;0;5;0&quot;<br>                dur=&quot;10s&quot;<br>                repeatCount=&quot;indefinite&quot; /&gt; --&gt;<br>            &lt;/path&gt;<br><br>     &lt;path<br>        ref=&quot;pathEl&quot;<br>        fill=&quot;none&quot;<br>        :stroke-dasharray=&quot;dashArray&quot;<br>        :stroke-dashoffset=&quot;strokeDashoffset&quot;<br>        stroke-width=&quot;6&quot;<br>        stroke=&quot;green&quot;<br>            d=&quot;M 10,30<br>            A 20,20 0,0,1 50,30<br>            A 20,20 0,0,1 90,30<br>            Q 90,60 50,90<br>            Q 10,60 10,30 z&quot; &gt;<br>            &lt;animate<br>                attributeName=&quot;stroke-dashoffset&quot;<br>                from=&quot;275&quot;<br>                to=&quot;0&quot;<br>                dur=&quot;4s&quot;<br>                repeatCount=&quot;indefinite&quot; /&gt;<br>            &lt;/path&gt; <br>&lt;/svg&gt;<br>&lt;/template&gt;<br><br>&lt;script setup lang=&quot;ts&quot;&gt;<br>import &#123; onMounted, ref &#125; from &#x27;vue&#x27;;<br><br>const pathEl = ref&lt;SVGGeometryElement&gt;()<br><br>const dashArray = ref(275)<br>const strokeDashoffset = ref(-275)<br><br>onMounted(() =&gt; &#123;<br>    const totalLength = pathEl.value?.getTotalLength()<br>    console.log(totalLength)<br><br>&#125;)<br><br>&lt;/script&gt;<br><br>&lt;style scoped&gt;<br><br>&lt;/style&gt;<br><br></code></pre></td></tr></table></figure>\n<p>运行效果预览<br><img src=\"/img/svg/svg-path-wather.gif\"></p>\n<p>其他<br>TODO</p>\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"svg-动画\"><a href=\"#svg-动画\" class=\"headerlink\" title=\"svg 动画\"></a>svg 动画</h1><p><a href=\"https://css-tricks.com/guide-svg-animations-smil/\">动画参考资料链接链接</a> <a href=\"https://css-tricks.com/guide-svg-animations-smil/\">https://css-tricks.com/guide-svg-animations-smil/</a></p>\n<h2 id=\"SVG-dasharray\"><a href=\"#SVG-dasharray\" class=\"headerlink\" title=\"SVG dasharray\"></a>SVG dasharray</h2><p>stroke-dasharray 属性可以设置线段绘制时的间隔<br>stroke-dasharray 数值型值 可以配置2个，第二个值缺省</p>\n<ul>\n<li>stroke-dasharray&#x3D;”4” 代表dash 值和offset间距保持一直</li>\n<li>stroke-dasharray&#x3D;”4 5”  dash宽度为4，每一块间距为5</li>\n</ul>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs html\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">svg</span> <span class=\"hljs-attr\">version</span>=<span class=\"hljs-string\">&quot;1.1&quot;</span></span><br><span class=\"hljs-tag\">     <span class=\"hljs-attr\">baseProfile</span>=<span class=\"hljs-string\">&quot;full&quot;</span></span><br><span class=\"hljs-tag\">     <span class=\"hljs-attr\">width</span>=<span class=\"hljs-string\">&quot;100%&quot;</span> <span class=\"hljs-attr\">height</span>=<span class=\"hljs-string\">&quot;100%&quot;</span></span><br><span class=\"hljs-tag\">     <span class=\"hljs-attr\">xmlns</span>=<span class=\"hljs-string\">&quot;http://www.w3.org/2000/svg&quot;</span>&gt;</span><br>    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">path</span> <span class=\"hljs-attr\">d</span>=<span class=\"hljs-string\">&quot;M0, 200, L200, 200, L400, 200&quot;</span> <span class=\"hljs-attr\">stroke</span>=<span class=\"hljs-string\">&quot;green&quot;</span> <span class=\"hljs-attr\">stroke-width</span>=<span class=\"hljs-string\">&quot;6&quot;</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">path</span>&gt;</span><br>    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">path</span> <span class=\"hljs-attr\">d</span>=<span class=\"hljs-string\">&quot;M0, 250, L200, 250, L400, 250&quot;</span> <span class=\"hljs-attr\">stroke</span>=<span class=\"hljs-string\">&quot;green&quot;</span> <span class=\"hljs-attr\">stroke-dasharray</span>=<span class=\"hljs-string\">&quot;2&quot;</span> <span class=\"hljs-attr\">stroke-width</span>=<span class=\"hljs-string\">&quot;6&quot;</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">path</span>&gt;</span><br><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">svg</span>&gt;</span><br><br></code></pre></td></tr></table></figure>\n\n<h2 id=\"stroke-dashoffset\"><a href=\"#stroke-dashoffset\" class=\"headerlink\" title=\"stroke-dashoffset\"></a><a href=\"https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/stroke-dashoffset\">stroke-dashoffset</a></h2><p>stroke-dashoffset 指定了 dash 模式到路径开始的距离</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs html\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">svg</span> <span class=\"hljs-attr\">version</span>=<span class=\"hljs-string\">&quot;1.1&quot;</span></span><br><span class=\"hljs-tag\">     <span class=\"hljs-attr\">baseProfile</span>=<span class=\"hljs-string\">&quot;full&quot;</span></span><br><span class=\"hljs-tag\">     <span class=\"hljs-attr\">width</span>=<span class=\"hljs-string\">&quot;100%&quot;</span> <span class=\"hljs-attr\">height</span>=<span class=\"hljs-string\">&quot;100%&quot;</span></span><br><span class=\"hljs-tag\">     <span class=\"hljs-attr\">xmlns</span>=<span class=\"hljs-string\">&quot;http://www.w3.org/2000/svg&quot;</span>&gt;</span><br>    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">path</span> <span class=\"hljs-attr\">d</span>=<span class=\"hljs-string\">&quot;M0, 200, L200, 200, L400, 200&quot;</span> <span class=\"hljs-attr\">stroke</span>=<span class=\"hljs-string\">&quot;green&quot;</span> <span class=\"hljs-attr\">stroke-width</span>=<span class=\"hljs-string\">&quot;6&quot;</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">path</span>&gt;</span><br>    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">path</span> <span class=\"hljs-attr\">d</span>=<span class=\"hljs-string\">&quot;M0, 250, L200, 250, L400, 250&quot;</span> <span class=\"hljs-attr\">stroke</span>=<span class=\"hljs-string\">&quot;green&quot;</span> <span class=\"hljs-attr\">stroke-dasharray</span>=<span class=\"hljs-string\">&quot;2&quot;</span> <span class=\"hljs-attr\">stroke-width</span>=<span class=\"hljs-string\">&quot;6&quot;</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">path</span>&gt;</span><br>    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">path</span> <span class=\"hljs-attr\">d</span>=<span class=\"hljs-string\">&quot;M0, 250, L200, 250, L400, 250&quot;</span> <span class=\"hljs-attr\">stroke</span>=<span class=\"hljs-string\">&quot;green&quot;</span> <span class=\"hljs-attr\">stroke-dasharray</span>=<span class=\"hljs-string\">&quot;2&quot;</span> <span class=\"hljs-attr\">stroke-dashoffset</span>=<span class=\"hljs-string\">&quot;2&quot;</span> <span class=\"hljs-attr\">stroke-width</span>=<span class=\"hljs-string\">&quot;6&quot;</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">path</span>&gt;</span><br><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">svg</span>&gt;</span><br><br>## 结合dasharray 与 stroke-dashoffset 让路径动起来<br>```html<br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">svg</span> <span class=\"hljs-attr\">version</span>=<span class=\"hljs-string\">&quot;1.1&quot;</span></span><br><span class=\"hljs-tag\">     <span class=\"hljs-attr\">baseProfile</span>=<span class=\"hljs-string\">&quot;full&quot;</span></span><br><span class=\"hljs-tag\">     <span class=\"hljs-attr\">width</span>=<span class=\"hljs-string\">&quot;100%&quot;</span> <span class=\"hljs-attr\">height</span>=<span class=\"hljs-string\">&quot;100%&quot;</span></span><br><span class=\"hljs-tag\">     <span class=\"hljs-attr\">xmlns</span>=<span class=\"hljs-string\">&quot;http://www.w3.org/2000/svg&quot;</span>&gt;</span><br>    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">path</span> <span class=\"hljs-attr\">d</span>=<span class=\"hljs-string\">&quot;M0, 200, L200, 200, L400, 200&quot;</span> <span class=\"hljs-attr\">stroke</span>=<span class=\"hljs-string\">&quot;green&quot;</span> <span class=\"hljs-attr\">stroke-width</span>=<span class=\"hljs-string\">&quot;6&quot;</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">path</span>&gt;</span><br>    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">path</span> <span class=\"hljs-attr\">d</span>=<span class=\"hljs-string\">&quot;M0, 250, L200, 250, L400, 250&quot;</span> <span class=\"hljs-attr\">stroke</span>=<span class=\"hljs-string\">&quot;green&quot;</span> <span class=\"hljs-attr\">stroke-dasharray</span>=<span class=\"hljs-string\">&quot;2&quot;</span> <span class=\"hljs-attr\">stroke-width</span>=<span class=\"hljs-string\">&quot;6&quot;</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">path</span>&gt;</span><br>    <br>    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">path</span> <span class=\"hljs-attr\">d</span>=<span class=\"hljs-string\">&quot;M0, 250, L200, 250, L400, 250&quot;</span> <span class=\"hljs-attr\">stroke</span>=<span class=\"hljs-string\">&quot;green&quot;</span> <span class=\"hljs-attr\">stroke-dasharray</span>=<span class=\"hljs-string\">&quot;2&quot;</span> <span class=\"hljs-attr\">stroke-dashoffset</span>=<span class=\"hljs-string\">&quot;2&quot;</span> <span class=\"hljs-attr\">stroke-width</span>=<span class=\"hljs-string\">&quot;6&quot;</span>&gt;</span><br>      <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">animate</span> <span class=\"hljs-attr\">attributeName</span>=<span class=\"hljs-string\">&quot;stroke-dashoffset&quot;</span> <span class=\"hljs-attr\">from</span>=<span class=\"hljs-string\">&quot;0&quot;</span> <span class=\"hljs-attr\">to</span>=<span class=\"hljs-string\">&quot;-20&quot;</span> <span class=\"hljs-attr\">dur</span>=<span class=\"hljs-string\">&quot;10&quot;</span> <span class=\"hljs-attr\">fill</span>=<span class=\"hljs-string\">&quot;freeze&quot;</span> <span class=\"hljs-attr\">repeatCount</span>=<span class=\"hljs-string\">&quot;indefinite&quot;</span> <span class=\"hljs-attr\">easing</span>=<span class=\"hljs-string\">&quot;linear&quot;</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">animate</span>&gt;</span><br>    <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">path</span>&gt;</span><br><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">svg</span>&gt;</span><br><br></code></pre></td></tr></table></figure>\n<p><img src=\"/img/svg/svg-1.gif\"></p>\n<h2 id=\"模拟管道水流动动画\"><a href=\"#模拟管道水流动动画\" class=\"headerlink\" title=\"模拟管道水流动动画\"></a>模拟管道水流动动画</h2><p>该动画需要通过 SVGGeometryElement的 getTotalLength 获取全部路径，通过动画设置stroke-dashoffset偏移</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs vue\">&lt;template&gt;<br>   &lt;svg version=&quot;1.1&quot;<br>     baseProfile=&quot;full&quot;<br>     width=&quot;100%&quot; height=&quot;100%&quot;<br>     xmlns=&quot;http://www.w3.org/2000/svg&quot;&gt;<br>     &lt;path<br>        ref=&quot;pathEl2&quot;<br>        fill=&quot;none&quot;<br>        :stroke-dasharray=&quot;dashArray&quot;<br>        stroke=&quot;red&quot;<br>        stroke-width=&quot;6&quot;<br>            d=&quot;M 10,30<br>            A 20,20 0,0,1 50,30<br>            A 20,20 0,0,1 90,30<br>            Q 90,60 50,90<br>            Q 10,60 10,30 z&quot; &gt;<br>            &lt;!-- &lt;animate<br>                attributeName=&quot;dash&quot;<br>                values=&quot;0;5;0&quot;<br>                dur=&quot;10s&quot;<br>                repeatCount=&quot;indefinite&quot; /&gt; --&gt;<br>            &lt;/path&gt;<br><br>     &lt;path<br>        ref=&quot;pathEl&quot;<br>        fill=&quot;none&quot;<br>        :stroke-dasharray=&quot;dashArray&quot;<br>        :stroke-dashoffset=&quot;strokeDashoffset&quot;<br>        stroke-width=&quot;6&quot;<br>        stroke=&quot;green&quot;<br>            d=&quot;M 10,30<br>            A 20,20 0,0,1 50,30<br>            A 20,20 0,0,1 90,30<br>            Q 90,60 50,90<br>            Q 10,60 10,30 z&quot; &gt;<br>            &lt;animate<br>                attributeName=&quot;stroke-dashoffset&quot;<br>                from=&quot;275&quot;<br>                to=&quot;0&quot;<br>                dur=&quot;4s&quot;<br>                repeatCount=&quot;indefinite&quot; /&gt;<br>            &lt;/path&gt; <br>&lt;/svg&gt;<br>&lt;/template&gt;<br><br>&lt;script setup lang=&quot;ts&quot;&gt;<br>import &#123; onMounted, ref &#125; from &#x27;vue&#x27;;<br><br>const pathEl = ref&lt;SVGGeometryElement&gt;()<br><br>const dashArray = ref(275)<br>const strokeDashoffset = ref(-275)<br><br>onMounted(() =&gt; &#123;<br>    const totalLength = pathEl.value?.getTotalLength()<br>    console.log(totalLength)<br><br>&#125;)<br><br>&lt;/script&gt;<br><br>&lt;style scoped&gt;<br><br>&lt;/style&gt;<br><br></code></pre></td></tr></table></figure>\n<p>运行效果预览<br><img src=\"/img/svg/svg-path-wather.gif\"></p>\n<p>其他<br>TODO</p>\n"}],"PostAsset":[],"PostCategory":[],"PostTag":[{"post_id":"clmehafes000064tubzh2dhep","tag_id":"clmehafey000364tuaukt7qzc","_id":"clmehaff0000664tudj6u3vca"},{"post_id":"clmehafew000264tuhdp28zj4","tag_id":"clmehaff0000564tu42lp0i1a","_id":"clmehaff2000864tu6tl88y3a"},{"post_id":"clmehafez000464tu0arwb5nv","tag_id":"clmehafey000364tuaukt7qzc","_id":"clmehaff2000964tu6ahrd5xc"}],"Tag":[{"name":"svg","_id":"clmehafey000364tuaukt7qzc"},{"name":"vue","_id":"clmehaff0000564tu42lp0i1a"}]}}